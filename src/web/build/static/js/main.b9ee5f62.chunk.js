(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/logo.6014fc10.png"},18:function(e,t,a){var n={api_url:"http://localhost:6969/api",url:"http://localhost:6969",provider:a(133).getDefaultProvider("kovan"),tokenAddress:"0x84C470e05128A2d1FfFF6132801182Aa4CeD9F89",tokenABI:[{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"UserBehaviorContract",type:"address"}],name:"setOnlyUserBehaviorContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"TransferFromTo",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}]};window.$linkIPFS="https://ipfs.fotra.tk/ipfs/",e.exports=n},256:function(e,t,a){},335:function(e,t,a){},389:function(e,t,a){e.exports=a(721)},570:function(e,t){},573:function(e,t,a){},575:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},636:function(e,t,a){},646:function(e,t,a){},682:function(e,t,a){},717:function(e,t,a){},718:function(e,t,a){},719:function(e,t,a){},720:function(e,t,a){},721:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=a(6),l=a(7),s=a(9),u=a(8),m=a(19),p=a(241),d=a(25),f=(a(31),a(256),a(770)),h=a(772),g=a(768),E=a(376),y=a(13),b=a(115),v=a(60),S=a(29),O=a.n(S),C=a(18),k=a.n(C),w=a(747),j=a(169),I=a(59),_=a(249),D=a(348),T=a.n(D),A=a(349),R=a(350),x=a(351),F=a.n(x),U=a(4),N={user:{},balanceETH:0,isSignin:!1,signinSuccessful:!1,isSignup:!1,signupSuccessful:!1,isUpdate:!1,updateSuccessful:!1,errorUpdate:null,error:null},P=a(375),L={receiverID:"",listFriend:[],listMessage:[],callingAPI:!1,titleName:"",isFindUser:!1,findUserSuccessful:!1,dataFindUser:[],error:null},M={musicSelected:{},rankingdata:null,isLoadingRankingData:!1,homeData:null,isGetHomeData:!1,getHomeDataSuccessful:!1,errorGetHomeData:null,hotUserData:null,error:null},H={uploadData:[],loadingUpload:!1,downloadData:[],loadingDownload:!1,isoData:[],loadingIsoData:!1,userInfoData:null,loadingUserData:!1,errorPage:null,errorUpload:null},B={songInfo:null,songSameSingerData:null,relatedUserData:null,isLoading:!1,error:null},G=Object(I.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_START":return Object(U.a)(Object(U.a)({},e),{},{isUpdate:!0});case"UPDATE_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{isUpdate:!1,updateSuccessful:!0,user:Object(U.a)(Object(U.a)({},e.user),{},{userName:t.userName})});case"UPDATE_FAIL":return Object(U.a)(Object(U.a)({},e),{},{isUpdate:!1,errorUpdate:t.err});case"HANDLE_UPDATE_ERROR":return Object(U.a)(Object(U.a)({},e),{},{errorUpdate:null});case"RESET_UPDATE":return Object(U.a)(Object(U.a)({},e),{},{isUpdate:!1,updateSuccessful:!1,errorUpdate:null});case"SET_HAK_ADD":return Object(U.a)(Object(U.a)({},e),{},{user:Object(U.a)(Object(U.a)({},e.user),{},{HAK:Number(e.user.HAK)+t.hak})});case"SET_HAK_SUB":return Object(U.a)(Object(U.a)({},e),{},{user:Object(U.a)(Object(U.a)({},e.user),{},{HAK:e.user.HAK-t.hak})});case"SET_ETH":return Object(U.a)(Object(U.a)({},e),{},{balanceETH:t.eth});case"SET_USER_DATA":return Object(U.a)(Object(U.a)({},e),{},{user:t.user});case"SIGNIN_START":return Object(U.a)(Object(U.a)({},e),{},{isSignin:!0});case"SIGNIN_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{isSignin:!1,signinSuccessful:!0});case"SIGNIN_FAIL":return Object(U.a)(Object(U.a)({},e),{},{isSignin:!1,error:t.err});case"SIGNIN_FAIL_HANDLE":return Object(U.a)(Object(U.a)({},e),{},{error:null});case"CLEAR_STATE_REGISTER":return Object(U.a)(Object(U.a)({},e),{},{isSignup:!1,signupSuccessful:!1,error:null});case"SIGNUP_START":return Object(U.a)(Object(U.a)({},e),{},{isSignup:!0});case"SIGNUP_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{isSignup:!1,signupSuccessful:!0});case"SIGNUP_FAIL":return Object(U.a)(Object(U.a)({},e),{},{isSignup:!1,error:t.err});case"SIGNUP_FAIL_HANDLE":return Object(U.a)(Object(U.a)({},e),{},{error:null});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE_NAME":return Object(U.a)(Object(U.a)({},e),{},{titleName:t.titleName});case"SET_RECEIVER_ID":return Object(U.a)(Object(U.a)({},e),{},{receiverID:t.receiverID});case"SET_LIST_FRIEND":return Object(U.a)(Object(U.a)({},e),{},{listFriend:t.listFriend,callingAPI:!1});case"SET_LIST_MESSAGE":return Object(U.a)(Object(U.a)({},e),{},{listMessage:t.listMessage,callingAPI:!1});case"PUSH_MESSAGE":return Object(U.a)(Object(U.a)({},e),{},{listMessage:[].concat(Object(P.a)(e.listMessage),[t.arr]),callingAPI:!1});case"CALLING_API":return Object(U.a)(Object(U.a)({},e),{},{callingAPI:!0});case"FAIL":return Object(U.a)(Object(U.a)({},e),{},{error:t.err,callingAPI:!1});case"FAIL_HANDLE":return Object(U.a)(Object(U.a)({},e),{},{error:null});case"FINDUSER_START":return Object(U.a)(Object(U.a)({},e),{},{isFindUser:!0});case"FINDUSER_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{isFindUser:!1,findUserSuccessful:!0,dataFindUser:t.result});case"FINDUSER_FAIL":return Object(U.a)(Object(U.a)({},e),{},{isFindUser:!1,error:t.err});case"FINDUSER_FAIL_HANDLE":return Object(U.a)(Object(U.a)({},e),{},{error:null});default:return e}},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HOT_USER_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{hotUserData:t.hotUserData});case"GET_HOME_DATA_START":return Object(U.a)(Object(U.a)({},e),{},{isGetHomeData:!0});case"GET_HOME_DATA_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{isGetHomeData:!1,getHomeDataSuccessful:!0,homeData:t.homeData});case"GET_HOME_DATA_FAIL":return Object(U.a)(Object(U.a)({},e),{},{isGetHomeData:!1,errorGetHomeData:t.err});case"GET_HOME_DATA_HANLDE_ERROR":return Object(U.a)(Object(U.a)({},e),{},{errorGetHomeData:null});case"GET_HOME_DATA_RESET":return Object(U.a)(Object(U.a)({},e),{},{homeData:{},isGetHomeData:!1,getHomeDataSuccessful:!1,errorGetHomeData:null});case"SET_MUSIC_SELECTED":return Object(U.a)(Object(U.a)({},e),{},{musicSelected:t.musicSelected});case"SET_RANKING":return Object(U.a)(Object(U.a)({},e),{},{rankingdata:t.rankingdata,isLoadingRankingData:!1});case"RANKING_START":return Object(U.a)(Object(U.a)({},e),{},{isLoadingRankingData:!0});case"SET_ERR":return Object(U.a)(Object(U.a)({},e),{},{error:t.err,isLoadingRankingData:!1});default:return e}},pageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_FOLLOW_PAGE":return Object(U.a)(Object(U.a)({},e),{},{userInfoData:Object(U.a)(Object(U.a)({},e.userInfoData),{},{isFollowed:t.setFollow,follow:t.setFollow?e.userInfoData.follow+1:e.userInfoData.follow-1})});case"HANDLE_SET_ERROR_GET_USER_UPLOAD":return Object(U.a)(Object(U.a)({},e),{},{errorUpload:null});case"SET_ERROR_GET_USER_UPLOAD":return Object(U.a)(Object(U.a)({},e),{},{errorUpload:t.errorPage});case"HANDLE_SET_ERROR_GET_USER_PAGE":return Object(U.a)(Object(U.a)({},e),{},{errorPage:null});case"SET_ERROR_GET_USER_PAGE":return Object(U.a)(Object(U.a)({},e),{},{errorPage:t.errorPage});case"SET_LOADING_UPLOAD":return Object(U.a)(Object(U.a)({},e),{},{loadingUpload:t.loadingUpload});case"SET_LOADING_DOWNLOAD":return Object(U.a)(Object(U.a)({},e),{},{loadingDownload:t.loadingDownload});case"SET_LOADING_ISO":return Object(U.a)(Object(U.a)({},e),{},{loadingIsoData:t.loadingIsoData});case"SET_LOADING_USER_INFO":return Object(U.a)(Object(U.a)({},e),{},{loadingUserData:t.loadingUserData});case"SET_MUSIC_SELECTED":return Object(U.a)(Object(U.a)({},e),{},{musicSelected:window.$linkIPFS+t.musicSelected});case"SET_USER_UPLOAD_DATA":return Object(U.a)(Object(U.a)({},e),{},{uploadData:t.uploadData});case"SET_USER_DOWNLOAD_DATA":return Object(U.a)(Object(U.a)({},e),{},{downloadData:t.downloadData});case"SET_USER_ISO_DATA":return Object(U.a)(Object(U.a)({},e),{},{isoData:t.isoData});case"SET_USER_INFO_DATA":return Object(U.a)(Object(U.a)({},e),{},{userInfoData:t.userInfoData});default:return e}},songReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RELATED_USER_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{relatedUserData:t.relatedUserData});case"GET_SONG_SAME_SINGER_SUCCESSFUL":return Object(U.a)(Object(U.a)({},e),{},{songSameSingerData:t.songSameSingerData});case"SET_IS_FOLLOW_SONG":return Object(U.a)(Object(U.a)({},e),{},{songInfo:Object(U.a)(Object(U.a)({},e.songInfo),{},{isFollowed:t.setFollow,follow:t.setFollow?e.songInfo.follow+1:e.songInfo.follow-1})});case"SET_SONG_DATA":return Object(U.a)(Object(U.a)({},e),{},{songInfo:t.songInfo});case"SET_ERROR_GET_SONG_DATA":return Object(U.a)(Object(U.a)({},e),{},{error:t.error});case"SET_LOADING_SONG_DATA":return Object(U.a)(Object(U.a)({},e),{},{isLoading:t.isLoading});default:return e}}}),z=function(e,t){return"LOG_OUT"===t.type&&(e=void 0),G(e,t)},K=Object(A.createLogger)({timestamps:!0,duration:!0}),$={key:"root",storage:T.a,whitelist:["userReducer"],stateReconciler:F.a},V=Object(_.a)($,z),q=Object(I.e)(V,Object(I.d)(Object(I.a)(K,R.a))),W=Object(_.b)(q),Y=a(34),J="updatable";function Q(){return{"Content-Type":"application/json; charset=utf-8",Accept:"application/json","x-access-token":q.getState().userReducer.user.accessToken}}function X(e){w.a.open({key:J,description:r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(j.a,null),r.a.createElement("p",{style:{marginLeft:"15px"}},e)),duration:0,placement:"bottomLeft",style:{width:350}})}function Z(e){w.a.error({key:J,message:"Error message",description:e,duration:0,placement:"bottomLeft"})}function ee(e){k.a.provider.waitForTransaction(e).then((function(){w.a.success({key:J,message:"Sucess Transaction",description:"Transaction has been successful",duration:0,placement:"bottomLeft",style:{width:350}})})).catch((function(e){w.a.error({key:J,message:"Error Transaction",description:"This is error message: "+e,duration:0,placement:"bottomLeft"})}))}function te(e,t){for(var a=""+Math.floor(e),n=e%1,r=a.length,o="";(r-=3)>0;)o=","+a.substr(r,3)+o;return a.substr(0,r+3)+o+(n?"."+Math.round(n*Math.pow(10,t||2)):"")}function ae(e){return Y.unix(Y().unix()+e).endOf("second").fromNow()}function ne(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/upload",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function re(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/download",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function oe(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/usingISO",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function ie(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/investISO",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function ce(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/faucet",e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function le(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/ethereums/getISOAddress?address="+e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}function se(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/postLyric",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function ue(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/createTemplateContract",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function me(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/createContract",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function pe(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/follow",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}function de(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/actions/getUserTemplateContract/?idMongo="+e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}function fe(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/actions/getContract/"+e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}function he(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/setApprovedContract",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function ge(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/executeContract",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function Ee(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/setApprove",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function ye(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/ethereums/cancelContract",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}function be(){return new Promise((function(e,t){return O.a.get(k.a.api_url+"/actions/getNotification",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))}))}var ve=a(133);function Se(e,t){return function(a){a({type:"SIGNIN_START"}),function(e,t){return new Promise((function(a,n){var r={email:e,password:t};return O.a.post(k.a.api_url+"/users/login",r).then((function(e){if(0===e.data.status)return n(e.data.error.message);a(e.data.result)})).catch((function(e){n(e)}))}))}(e,t).then((function(e){a(function(e){return{type:"SET_USER_DATA",user:e}}(e))})).then((function(){a({type:"SIGNIN_SUCCESSFUL"})})).catch((function(e){a(function(e){return{type:"SIGNIN_FAIL",err:e}}(e))}))}}function Oe(e){return function(t){t({type:"UPDATE_START"}),function(e){return new Promise((function(t,a){return O.a.post(k.a.api_url+"/actions/updateUser",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);console.log("this is result "+e.data.result),t(e.data.result)})).catch((function(e){a(e)}))}))}(e).then((function(e){t(function(e){return{type:"UPDATE_SUCCESSFUL",userName:e}}(e))})).catch((function(e){console.log(e),t(function(e){return{type:"UPDATE_FAIL",err:e}}(e))}))}}var Ce=!0;function ke(e){return{type:"SET_ETH",eth:e}}function we(e,t,a,n,r){return function(o){o({type:"SIGNUP_START"}),function(e,t,a,n,r){return new Promise((function(o,i){var c={user:{email:e,password:t,nickName:a,phone:n,genre:r}};return O.a.post(k.a.api_url+"/users/create",c).then((function(e){if(1===e.data.status)return o();e.data.error.message.errmsg&&i(e.data.error.message.errmsg),i(e.data.error.message)})).catch((function(e){i(e)}))}))}(e,t,a,n,r).then((function(){o({type:"SIGNUP_SUCCESSFUL"})})).then((function(){o(Se(e,t))})).catch((function(e){o(je(e))}))}}function je(e){return{type:"SIGNUP_FAIL",err:e}}var Ie=f.a.Text,_e=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isloading:!1},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||(console.log("Received values of form: ",a),e.setState({isloading:!0}),e.props.login(a.email,a.password))}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return this.props.userReducer.error&&(this.setState({isloading:!1}),h.a.error({title:"Login error message ",content:this.props.userReducer.error}),this.props.signin_fail_handle()),this.props.userReducer.signinSuccessful&&(this.props.history.push("/home"),h.a.success({title:"Sinh Vi\xean th\u1ef1c hi\u1ec7n kho\xe1 lu\u1eadn",content:r.a.createElement("div",null,r.a.createElement(Ie,null,"Nguy\u1ec5n Ho\xe0ng H\u1ea3i"),r.a.createElement(Ie,{code:!0},"15520186"),r.a.createElement("br",null),r.a.createElement(Ie,null,"Nguy\u1ec5n Xu\xe2n T\xfa"),r.a.createElement(Ie,{code:!0},"15520961"))})),r.a.createElement("div",{className:"wrap-form-login"},r.a.createElement(g.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(g.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(E.a,{prefix:r.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(g.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(E.a,{prefix:r.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(g.a.Item,null,t("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(b.a,null,"Remember me")),r.a.createElement("a",{href:"",className:"login-form-forgot"},"Forgot password"),r.a.createElement(v.a,{loading:this.state.isloading,type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or",r.a.createElement(v.a,{onClick:function(){return e.props.history.push("/register")},type:"link"},"register now!"))))}}]),a}(r.a.Component),De=g.a.create({name:"normal_login"})(_e),Te=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{login:function(t,a){return e(Se(t,a))},signin_fail_handle:function(){return e({type:"SIGNIN_FAIL_HANDLE"})}}}))(De),Ae=a(89),Re=a(776),xe=a(80),Fe=a(182),Ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Re.a,{icon:r.a.createElement(y.a,{type:"loading"}),title:"Please wait a second ..."})}}]),a}(r.a.Component),Ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.subTitle,o=t.goTo,i=t.func;return r.a.createElement(Re.a,{status:"error",title:a,subTitle:n,extra:[r.a.createElement(v.a,{type:"primary",onClick:function(){e.props.history.push("/".concat(o)),i()}},"Go to ",o)]})}}]),a}(r.a.Component),Pe=Object(d.g)(Ne),Le=Ae.a.Option,Me=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmDirty:!1},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFieldsAndScroll((function(t,a){var n=a.email,r=a.password,o=a.nickName,i=a.phone,c=a.genre;t||(console.log("Received values of form: ",a),e.props.createUser(n,r,o,i,c))}))},e.handleConfirmBlur=function(t){var a=t.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!a})},e.compareToFirstPassword=function(t,a,n){var r=e.props.form;a&&a!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},e.validateToNextPassword=function(t,a,n){var r=e.props.form;a&&e.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},e.handleSubmitSuccess=function(){e.props.history.push("/home"),e.props.clear_state_register()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},a=e("prefix",{initialValue:"84"})(r.a.createElement(Ae.a,{style:{width:70}},r.a.createElement(Le,{value:"84"},"+84"),r.a.createElement(Le,{value:"86"},"+86")));return this.props.userReducer.error?(alert(this.props.userReducer.error),this.props.clear_state_register(),r.a.createElement(Pe,null)):this.props.userReducer.signupSuccessful?(console.log("vo roi ne"),this.props.form.resetFields(),r.a.createElement(Re.a,{status:"success",title:"Login Success",subTitle:"Click here to go home page !",extra:[r.a.createElement(v.a,{type:"primary",onClick:this.handleSubmitSuccess},"Go to homepage")]})):this.props.userReducer.isSignup?r.a.createElement(Ue,null):r.a.createElement("div",{className:"wrap-form-login"},r.a.createElement(g.a,{onSubmit:this.handleSubmit,className:"register-form"},r.a.createElement(g.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(E.a.Password,null))),r.a.createElement(g.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(E.a.Password,{onBlur:this.handleConfirmBlur}))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Nickname\xa0",r.a.createElement(xe.a,{title:"What do you want others to call you?"},r.a.createElement(y.a,{type:"question-circle-o"})))},e("nickName",{rules:[{required:!0,message:"Your input is not valid."}]})(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:"Phone Number"},e("phone",{rules:[{required:!0,message:"Please input your phone number!"}]})(r.a.createElement(E.a,{addonBefore:a,style:{width:"100%"}}))),r.a.createElement(g.a.Item,{label:"Genre"},e("genre",{initialValue:3})(r.a.createElement(Fe.a.Group,null,r.a.createElement(Fe.a,{value:1},"Man"),r.a.createElement(Fe.a,{value:2},"Woman"),r.a.createElement(Fe.a,{value:3},"Other")))),r.a.createElement(g.a.Item,t,e("agreement",{valuePropName:"checked"})(r.a.createElement(b.a,null,"I have read the ",r.a.createElement("a",null,"agreement")))),r.a.createElement(g.a.Item,t,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Register"))))}}]),a}(r.a.Component),He=g.a.create({name:"register"})(Me),Be=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{createUser:function(t,a,n,r,o){return e(we(t,a,n,r,o))},signup_fail:function(){return e(je())},signup_fail_handle:function(){return e({type:"SIGNUP_FAIL_HANDLE"})},clear_state_register:function(){return e({type:"CLEAR_STATE_REGISTER"})}}}))(He),Ge=a(239),ze=a.n(Ge),Ke=a(250),$e=a(748),Ve=a(781),qe=a(181),We=a(782),Ye=a(774),Je=a(114),Qe=a.n(Je),Xe=f.a.Text,Ze=f.a.Paragraph,et=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,amountFaucet:5e6,notificationData:[],notificationCount:0},e.onClickLogOut=function(){e.props.logOut(),localStorage.clear(),e.props.history.push("/login")},e.handleOk=function(){e.setState({visible:!1}),X("Faucet HAK loading ..."),ce({address:e.props.userReducer.user.addressEthereum,amount:e.state.amountFaucet}).then((function(e){ee(e)}))},e.componentDidMount=function(){e.props.getBalance(e.props.userReducer.user.addressEthereum),0===e.state.notificationData.length&&be().then((function(t){e.setState({notificationData:t.data,notificationCount:t.countFalse})}))},e.handleClickSeen=function(t,a){if(window.$socket.emit("notification_seen",{id:t}),!e.state.notificationData[a].isSeen){var n=e.state.notificationData;n[a].isSeen=!0,e.setState({notificationData:n,notificationCount:e.state.notificationCount-1})}},e.componentWillMount=function(){var t=e.props.userReducer.user.accessToken;window.$socket||(window.$socket=ze()(k.a.url+"/chat",{query:{token:t}})),window.$socket.on("notification",(function(t){var a=e.state.notificationData;a.unshift(t),e.setState({notificationCount:e.state.notificationCount+1,notificationData:a})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.amountFaucet,o=t.notificationCount,i=t.notificationData,c=r.a.createElement(Ke.a,null,i.map((function(t,a){return e.props.userReducer.user.id===t.senderID?r.a.createElement(Ke.a.Item,{style:{display:"flex",alignItems:"center",backgroundColor:t.isSeen?"#f5f5f5":""},onClick:function(){return e.handleClickSeen(t._id,a)}},r.a.createElement($e.a,{shape:"square",size:48,src:window.$linkIPFS+t.songImage}),r.a.createElement("div",{style:{height:50,marginLeft:10}},r.a.createElement(Ze,{style:{marginBottom:7},ellipsis:!0},t.contentSender),1===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"\u0110ang ch\u1edd ",r.a.createElement(Xe,{code:!0},"x\xe1c th\u1ef1c b\u1ea3n quy\u1ec1n t\xe1c ph\u1ea9m")," tr\xean h\u1ec7 th\u1ed1ng."):2===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\u1ea1n b\u1ecb tr\u1eeb v\xe0o v\xed ",r.a.createElement(Xe,{code:!0},te(t.money))," HAK."):3===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Th\u1eddi gian cho ph\xe9p \u0111\u1ea7u t\u01b0 c\xf2n ",r.a.createElement(Xe,{code:!0},ae(t.money))):4===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\u1ea1n b\u1ecb tr\u1eeb v\xe0o v\xed ",r.a.createElement(Xe,{code:!0},te(t.money))," HAK."):6===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Approved")," n\u1ebfu \u0111\xe3 ch\u1ea5p nh\u1eadn h\u1ee3p \u0111\u1ed3ng"):7===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Ch\u1edd")," \u0111\u1ed1i t\xe1c ch\u1ea5p nh\u1eadn h\u1ee3p \u0111\u1ed3ng"):8===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Ki\u1ec3m tra")," l\u1ea1i s\u1ed1 d\u01b0"):9===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\u1ea1n ph\u1ea3i ch\u1ecbu ",r.a.createElement(Xe,{code:!0}," ti\u1ec1n b\u1ed3i th\u01b0\u1eddng")," v\xec h\xe0nh \u0111\u1ed9ng n\xe0y"):10===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\xe2y gi\u1edd b\u1ea1n l\xe0 ",r.a.createElement(Xe,{code:!0},"Ch\u1ee7 s\u1edf h\u1eefu")," t\xe1c ph\u1ea9m n\xe0y tr\xean h\u1ec7 th\u1ed1ng"):null)):r.a.createElement(Ke.a.Item,{style:{display:"flex",alignItems:"center",backgroundColor:t.isSeen?"#f5f5f5":""},onClick:function(){return e.handleClickSeen(t._id,a)}},5===t.type||6===t.type||7===t.type||8===t.type||9===t.type?r.a.createElement($e.a,{shape:"square",size:48,src:window.$linkIPFS+t.songImage}):r.a.createElement($e.a,{shape:"circle",size:48,src:window.$linkIPFS+t.senderAvatar}),r.a.createElement("div",{style:{height:50,marginLeft:10}},r.a.createElement(Ze,{style:{marginBottom:7},ellipsis:!0},t.contentReceiver),6===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Ki\u1ec3m tra")," l\u1ea1i h\u1ee3p \u0111\u1ed3ng n\xe0y"):7===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Confirm")," h\u1ee3p \u0111\u1ed3ng tr\xean Blockchain "):8===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"Vui l\xf2ng ",r.a.createElement(Xe,{code:!0},"Ki\u1ec3m tra")," l\u1ea1i s\u1ed1 d\u01b0"):9===t.type?r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c ",r.a.createElement(Xe,{code:!0},"ti\u1ec1n b\u1ed3i th\u01b0\u1eddng")):r.a.createElement(Ze,{type:"secondary",style:{marginBottom:0},ellipsis:!0},"B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng th\xeam v\xe0o v\xed ",r.a.createElement(Xe,{code:!0},te(t.money))," HAK")))}))),l=r.a.createElement(Ke.a,null,r.a.createElement(Ke.a.Item,{onClick:function(){return e.props.history.push("/HAK")}},r.a.createElement(y.a,{type:"pay-circle",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,te(this.props.userReducer.user.HAK)," HAK")),r.a.createElement(Ke.a.Item,{onClick:function(){return e.props.history.push("/ETH")}},r.a.createElement(y.a,{type:"dollar",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,this.props.userReducer.balanceETH," ETH")),r.a.createElement(Ke.a.Divider,null),r.a.createElement(Ke.a.Item,{onClick:function(){return e.props.history.push("/contractFormManager")}},r.a.createElement(y.a,{type:"solution",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,"Contract form manager")),r.a.createElement(Ke.a.Item,{onClick:function(){return e.props.history.push("/setting")}},r.a.createElement(y.a,{type:"setting",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,"Setting")),r.a.createElement(Ke.a.Item,{onClick:function(){e.setState({visible:!0})}},r.a.createElement(y.a,{type:"transaction",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,"Faucet")),r.a.createElement(Ke.a.Divider,null),r.a.createElement(Ke.a.Item,{onClick:function(){return e.onClickLogOut()}},r.a.createElement(y.a,{type:"logout",style:{color:"#1da1f2",fontSize:15,margin:5}}),r.a.createElement(Xe,null,"Log Out")));return r.a.createElement("div",{style:{borderBottom:"1px solid #D6DBDF",height:60,display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:1100}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(xe.a,{placement:"topLeft",title:"Justice music",arrowPointAtCenter:!0},r.a.createElement("img",{src:Qe.a,onClick:function(){return e.props.history.push("/home")},alt:"Justice music",style:{width:"40px",height:"40px"}}))),r.a.createElement("div",null,r.a.createElement(v.a,{disabled:!0,ghost:!0,style:{color:"#424242",marginLeft:5}},"SONGS"),r.a.createElement(v.a,{disabled:!0,ghost:!0,style:{color:"#424242",marginLeft:5}},"ARTISTS"),r.a.createElement(v.a,{disabled:!0,ghost:!0,style:{color:"#424242",marginLeft:5}},"RANKING"),r.a.createElement(v.a,{disabled:!0,ghost:!0,style:{color:"#424242",marginLeft:5}},"EVENTS"),r.a.createElement(v.a,{ghost:!0,style:{color:"#424242",marginLeft:5},onClick:function(){return e.props.history.push("/iso")}},"ISO"),r.a.createElement(v.a,{ghost:!0,style:{color:"#424242",marginLeft:5},onClick:function(){return e.props.history.push("/contract")}},"CONTRACTS"),r.a.createElement(Ve.a,{disabled:!0,style:{width:200},dataSource:["Burns Bay Road","Downing Street","Wall Street"],placeholder:"T\xecm b\xe0i h\xe1t ho\u1eb7c ca s\u0129 ...",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}},r.a.createElement(E.a,{suffix:r.a.createElement(y.a,{type:"search",className:"certain-category-icon"})}))),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(xe.a,{placement:"topLeft",title:"Home Page",arrowPointAtCenter:!0},r.a.createElement($e.a,{shape:"circle",size:35,src:window.$linkIPFS+this.props.userReducer.user.avatar,onClick:function(){e.props.userReducer.user.userName?e.props.history.push("/page/".concat(e.props.userReducer.user.userName)):e.props.history.push("/page/".concat(e.props.userReducer.user.addressEthereum))}})),r.a.createElement(xe.a,{placement:"topLeft",title:"Notification",arrowPointAtCenter:!0},r.a.createElement(qe.a,{placement:"bottomCenter",trigger:["click"],overlay:c,overlayStyle:{width:500}},r.a.createElement(We.a,{count:o},r.a.createElement(y.a,{type:"bell",style:{color:"#1da1f2",fontSize:25,paddingLeft:17}})))),r.a.createElement(xe.a,{placement:"topLeft",title:"Message",arrowPointAtCenter:!0},r.a.createElement(We.a,{count:0},r.a.createElement(y.a,{type:"message",onClick:function(){return e.props.history.push("/message")},style:{color:"#1da1f2",fontSize:25,paddingLeft:17}}))),r.a.createElement(xe.a,{placement:"topLeft",title:"Contract",arrowPointAtCenter:!0},r.a.createElement(We.a,{count:0},r.a.createElement(y.a,{type:"profile",style:{color:"#1da1f2",fontSize:25,paddingLeft:17}}))),r.a.createElement(qe.a,{overlay:l,trigger:["click"]},r.a.createElement(y.a,{type:"caret-down",style:{color:"#1da1f2",fontSize:25,paddingLeft:17}})))),r.a.createElement(h.a,{title:"Faucet HAK",width:250,visible:a,onOk:this.handleOk,onCancel:function(){e.setState({visible:!1})}},r.a.createElement(Ye.a,{defaultValue:n,min:1e6,max:1e7,style:{width:150,marginBottom:20,marginRight:10},formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:function(t){e.setState({amountFaucet:t})}}),r.a.createElement("span",{className:"ant-form-text"}," HAK"),r.a.createElement(Ye.a,{style:{marginRight:10},disabled:!0,defaultValue:.1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}),r.a.createElement("span",{className:"ant-form-text"}," ETH")))}}]),a}(n.Component),tt=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{getBalance:function(t){return e((a=t,function(e){if(Ce){Ce=!1,k.a.provider.getBalance(a).then((function(t){var a=ve.ethers.utils.formatEther(t);e(ke(a))})),k.a.provider.on(a,(function(t){var a=ve.ethers.utils.formatEther(t);e(ke(a))}));var t=k.a.tokenAddress,n=k.a.tokenABI,r=k.a.provider,o=new ve.ethers.Contract(t,n,r),i=o.filters.Transfer(null,a);o.on(i,(function(t,a,n){console.log(Number(n)),console.log("I received "+n.toString()+" tokens from "+t),e({type:"SET_HAK_ADD",hak:Number(n)})}));var c=o.filters.Transfer(a);o.on(c,(function(t,a,n){console.log(Number(n)),console.log("I sended "+n.toString()+" tokens to "+a),e({type:"SET_HAK_SUB",hak:Number(n)})}))}}));var a}}}))(et),at=(a(573),a(121)),nt=a(68),rt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"footerdiv"},r.a.createElement("div",{className:"footercontent"},r.a.createElement(at.a,{gutter:8},r.a.createElement(nt.a,{className:"gutter-row",span:8},r.a.createElement("img",{src:Qe.a,className:"footerlogo",alt:"Justice music"}),r.a.createElement("h2",null,"Justice Music")),r.a.createElement(nt.a,{className:"gutter-row",span:8},r.a.createElement("div",{className:"footermiddlecol"},r.a.createElement("p",null," ",r.a.createElement(y.a,{type:"environment"})," Silicon Valley, United States"),r.a.createElement("p",null," ",r.a.createElement(y.a,{type:"mobile"})," 0372598218"),r.a.createElement("p",null," \xa9 2019 Justice Music All Rights Reserverd"))),r.a.createElement(nt.a,{className:"gutter-row",span:8},r.a.createElement("h2",null," About The Company"),r.a.createElement("p",null),r.a.createElement("p",null," We offer many solutions to protect your music copyright.  "))))))}}]),a}(r.a.Component);var ot=a(749),it=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"block"}},r.a.createElement(tt,{history:this.props.history,logOut:this.props.log_out}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:10}},r.a.createElement("div",{style:{width:1100,minHeight:"calc(100vh - 270px)",backgroundColor:"#ffffff",padding:10}},this.props.main)),r.a.createElement(rt,null),r.a.createElement(ot.a,{visibilityHeight:"100"}))}}]),a}(n.Component),ct=Object(m.b)(null,(function(e){return{log_out:function(){return e({type:"LOG_OUT"})}}}))(it),lt=a(132),st=a(28),ut=a(758),mt=a(750),pt=a(722),dt=a(363),ft=a.n(dt),ht=a(773),gt=a(761),Et=a(139),yt=a(364),bt=a.n(yt),vt=a(365),St=a.n(vt),Ot=a(759),Ct=a(760),kt=a(753);var wt=Object(st.a)({card:{margin:"10px"},title:{fontSize:14,maxWidth:"50vw"},div:{display:"table"},sender:{display:"flex",justifyContent:"flex-end"},seen:{color:"#bdbdbd"}})((function(e){var t,a,n=e.classes;return!0===e.sender&&(t=n.sender),!0===e.seen&&(a="seen"),r.a.createElement("li",{className:t,style:{listStyleType:"none"}},r.a.createElement("div",{className:n.div},r.a.createElement(mt.a,{className:n.card},r.a.createElement(kt.a,{style:{paddingBottom:"16px"}},r.a.createElement(Et.a,{className:n.title,color:"textSecondary",gutterBottom:!0},e.content))),r.a.createElement("div",{className:n.seen},a)))})),jt=a(185),It=a(780),_t=a(755),Dt=a(784),Tt=a(756),At=a(757),Rt=a(754),xt=a(766),Ft=a(138),Ut=a.n(Ft),Nt=a(118),Pt=a.n(Nt);function Lt(){return new Promise((function(e,t){var a={userID:q.getState().userReducer.user.id};return O.a.post(k.a.api_url+"/chats/getListFriend",a,{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error);e(a.data.result)})).catch((function(e){t(e)}))}))}function Mt(){return function(e){e({type:"CALLING_API"}),Lt().then((function(t){if(e(Bt(t)),t.length>=1){var a=t[0]._id;e(Ht(a)),e(zt(a)),e(Gt(t[0].email))}})).catch((function(t){e(Kt(t))}))}}function Ht(e){return function(t){t({type:"CALLING_API"}),function(e){return new Promise((function(t,a){var n={senderID:q.getState().userReducer.user.id,receiverID:e};return O.a.post(k.a.api_url+"/chats/getListMessage",n,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}(e).then((function(e){t(function(e){return{type:"SET_LIST_MESSAGE",listMessage:e}}(e))})).catch((function(e){t(Kt(e))}))}}function Bt(e){return{type:"SET_LIST_FRIEND",listFriend:e}}function Gt(e){return{type:"SET_TITLE_NAME",titleName:e}}function zt(e){return{type:"SET_RECEIVER_ID",receiverID:e}}function Kt(e){return{type:"FAIL",err:e}}function $t(e){return function(t){t({type:"FINDUSER_START"}),function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/users/find",{params:{keyword:e}}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}(e).then((function(e){t(function(e){return{type:"FINDUSER_SUCCESSFUL",result:e}}(e))})).catch((function(e){t(function(e){return{type:"FINDUSER_FAIL",err:e}}(e))}))}}var Vt={avatar:{backgroundColor:Pt.a[100],color:Pt.a[600]}},qt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.props.onClose(e.props.selectedValue)},e.handleListItemClick=function(t,a){e.props.onClose(),e.props.set_title_name(a),e.props.getListMessage(t),e.props.select_user_to_chat(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=(t.onClose,t.selectedValue,Object(jt.a)(t,["classes","onClose","selectedValue"]));return r.a.createElement(xt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},n),r.a.createElement(Rt.a,{id:"simple-dialog-title"},"List users"),r.a.createElement("div",null,r.a.createElement(_t.a,null,this.props.chatReducer.dataFindUser.map((function(t){return r.a.createElement(Dt.a,{button:!0,onClick:function(){return e.handleListItemClick(t._id,t.email)},key:t._id},r.a.createElement(Tt.a,null,r.a.createElement(It.a,{className:a.avatar},r.a.createElement(Ut.a,null))),r.a.createElement(At.a,{primary:t.email}))})))))}}]),a}(r.a.Component),Wt=Object(m.b)((function(e){return{chatReducer:e.chatReducer}}),(function(e){return{getListFriend:function(){return e(Mt())},getListMessage:function(t){return e(Ht(t))},select_user_to_chat:function(t){return e(zt(t))},set_title_name:function(t){return e(Gt(t))}}}))(Object(st.a)(Vt)(qt)),Yt={avatar:{backgroundColor:Pt.a[100],color:Pt.a[600]},onlineBar:{textAlign:"right"}},Jt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleListItemClick=function(t,a){e.props.getListMessage(t),e.props.select_user_to_chat(t),e.props.set_title_name(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(_t.a,null,this.props.chatReducer.listFriend.map((function(a){return a.socketID?r.a.createElement(Dt.a,{button:!0,onClick:function(){return e.handleListItemClick(a._id,a.email)},key:a._id},r.a.createElement(Tt.a,null,r.a.createElement(It.a,{className:t.avatar},r.a.createElement(Ut.a,null))),r.a.createElement(At.a,{primary:a.email}),r.a.createElement(At.a,{primary:"online",className:t.onlineBar})):r.a.createElement(Dt.a,{button:!0,onClick:function(){return e.handleListItemClick(a._id,a.email)},key:a._id},r.a.createElement(Tt.a,null,r.a.createElement(It.a,{className:t.avatar},r.a.createElement(Ut.a,null))),r.a.createElement(At.a,{primary:a.email}))}))))}}]),a}(r.a.Component),Qt=Object(m.b)((function(e){return{chatReducer:e.chatReducer}}),(function(e){return{getListFriend:function(){return e(Mt())},getListMessage:function(t){return e(Ht(t))},select_user_to_chat:function(t){return e(zt(t))},set_title_name:function(t){return e(Gt(t))}}}))(Object(st.a)(Yt)(Jt)),Xt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClickSearch=function(){n.setState({open:!0}),n.props.findUser(n.state.searchText)},n.handleClose=function(){n.setState({open:!1})},n.onClickLogOut=function(e){window.$socket.disconnect(),n.props.log_out(),localStorage.clear(),n.props.history.push("/login")},n.onFocusMessage=function(){var e=n.props.chatReducer.listMessage,t=e[e.length-1];if(t){var a={senderID:t.senderID,receiverID:t.receiverID};n.props.userReducer.user.id!==t.senderID&&window.$socket.emit("is seen",a)}},n.handleClickSend=function(){if(n.state.content){var e={senderID:n.props.userReducer.user.id,receiverID:n.props.chatReducer.receiverID,content:n.state.content},t={senderID:n.props.userReducer.user.id,content:n.state.content,date_created:Date(Date.now())};n.props.chatReducer.listFriend.find((function(e){return e._id===n.props.chatReducer.receiverID}))?window.$socket.emit("chat message",e):(window.$socket.emit("first message",e),window.$socket.on("return friend",(function(){n.props.getNewFriend()}))),n.props.push_message(t),n.setState({content:""});var a=document.getElementById("inputMessage");a.scrollTop=a.scrollHeight,window.$socket.emit("typing",Object(U.a)(Object(U.a)({},e),{},{isTyping:!1}))}},n.componentWillMount=function(){null===n.props.userReducer.user.accessToken&&n.props.history.push("/login"),n.props.getListFriend(),window.$socket.on("error",(function(e){alert("socket error"+e)})),window.$socket.on("chat message",(function(e){var t={senderID:e.senderID,receiverID:e.receiverID,content:e.content,date_created:Date(Date.now())};e.senderID===n.props.chatReducer.receiverID&&n.props.push_message(t)})),window.$socket.on("first message",(function(e){var t={senderID:e.senderID,receiverID:e.receiverID,content:e.content,date_created:Date(Date.now())};n.props.getListFriend(),e.senderID===n.props.chatReducer.receiverID&&n.props.push_message(t)})),window.$socket.on("is seen",(function(){n.props.getListMessage(n.props.chatReducer.receiverID)})),window.$socket.on("typing",(function(e){e.senderID===n.props.chatReducer.receiverID&&(!0===e.isTyping&&n.setState({typing:!0}),!1===e.isTyping&&n.setState({typing:!1}))}))},n.state={open:!1,searchText:"",content:"",typing:!1},n.socket=null,n.handleKeyPressSearch=n.handleKeyPressSearch.bind(Object(lt.a)(n)),n.handleKeyPressMessage=n.handleKeyPressMessage.bind(Object(lt.a)(n)),n}return Object(l.a)(a,[{key:"handleKeyPressSearch",value:function(e){"Enter"===e.key&&this.handleClickSearch()}},{key:"handleKeyPressMessage",value:function(e){var t={receiverID:this.props.chatReducer.receiverID,senderID:this.props.userReducer.user.id};"Enter"===e.key?this.handleClickSend(e):"Backspace"===e.key&&""===this.state.content&&window.$socket.emit("typing",Object(U.a)(Object(U.a)({},t),{},{isTyping:!1}))}},{key:"onTyping",value:function(e){this.setState({content:e.target.value});var t={receiverID:this.props.chatReducer.receiverID,senderID:this.props.userReducer.user.id};0===this.state.content.length&&(this.onFocusMessage(),window.$socket.emit("typing",Object(U.a)(Object(U.a)({},t),{},{isTyping:!0})))}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("inputMessage");e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.chatReducer.error&&(alert("Find user fail: "+this.props.chatReducer.error),this.props.signin_fail_handle()),r.a.createElement(ut.a,{container:!0,style:{marginBottom:100}},r.a.createElement(ut.a,{item:!0,xs:12,sm:4},r.a.createElement("div",{className:t.divBottom,style:{borderRight:"1px solid #e0e0e0"}},r.a.createElement("div",{className:t.searchDiv},r.a.createElement(ht.a,{placeholder:"Search\u2026",classes:{root:t.inputSearchRoot,input:t.inputSearch},value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:this.handleKeyPressSearch}),r.a.createElement(Ot.a,{className:t.divider}),r.a.createElement(Ct.a,{type:"submit",variant:"outlined",className:t.iconButton,onClick:this.handleClickSearch,disabled:this.props.chatReducer.isFindUser},r.a.createElement(ft.a,null)),r.a.createElement(Wt,{className:t.findUser,open:this.state.open,onClose:this.handleClose})),r.a.createElement("div",null,r.a.createElement(mt.a,{className:t.cardListFriend},r.a.createElement(Qt,null))))),r.a.createElement(ut.a,{item:!0,xs:12,sm:8},r.a.createElement("div",{className:t.divTop,style:{justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(Ct.a,{style:{padding:5}},r.a.createElement(bt.a,null)),this.props.userReducer.user.email),r.a.createElement(Et.a,{variant:"h6"},this.props.chatReducer.titleName)),r.a.createElement("div",{className:t.divBottom},r.a.createElement(mt.a,{className:t.cardMessage},r.a.createElement("div",{id:"inputMessage",style:{overflow:"auto"}},r.a.createElement("ul",null,this.props.chatReducer.listMessage.map((function(t){if(t.senderID===e.props.userReducer.user.id){var a=e.props.chatReducer.listMessage,n=a[a.length-1];return t===n&&!0===n.isSeen?r.a.createElement(wt,{content:t.content,key:t._id,sender:!0,seen:!0}):r.a.createElement(wt,{content:t.content,key:t._id,sender:!0})}return r.a.createElement(wt,{content:t.content,key:t._id,sender:!1})})),r.a.createElement(Et.a,{style:{color:"#bdbdbd"}},this.state.typing?"Typing.......":""))),r.a.createElement("div",null,r.a.createElement(pt.a,{className:t.messageBar,elevation:4},r.a.createElement(ht.a,{className:t.input,onFocus:this.onFocusMessage,placeholder:"Message...",value:this.state.content,onChange:function(t){e.onTyping(t)},onKeyUp:this.handleKeyPressMessage}),r.a.createElement(Ot.a,{className:t.divider}),r.a.createElement(gt.a,{color:"secondary",onClick:function(t){e.handleClickSend(t)}},"Send",r.a.createElement(St.a,null))))))))}}]),a}(r.a.Component),Zt=Object(m.b)((function(e){return{chatReducer:e.chatReducer,userReducer:e.userReducer}}),(function(e){return{findUser:function(t){return e($t(t))},findUser_fail_handle:function(){return e({type:"FINDUSER_FAIL_HANDLE"})},getListFriend:function(){return e(Mt())},getListMessage:function(t){return e(Ht(t))},push_message:function(t){return e(function(e){return{type:"PUSH_MESSAGE",arr:e}}(t))},getNewFriend:function(){return e((function(e){e({type:"CALLING_API"}),Lt().then((function(t){e(Bt(t))})).catch((function(t){e(Kt(t))}))}))},log_out:function(){return e({type:"LOG_OUT"})}}}))(Object(st.a)((function(e){return{messageBar:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},divider:{width:1,height:40,margin:4},divTop:{padding:e.spacing.unit,display:"flex",flexDirection:"row",borderBottom:"1px solid #e0e0e0"},divBottom:{height:"calc(100vh - "+15*e.spacing.unit+"px)",padding:2*e.spacing.unit},searchDiv:{background:"#e0e0e0",borderRadius:6,color:"#212121",display:"flex",flexDirection:"row"},iconButton:{background:"#bdbdbd"},input:{marginLeft:8,flex:1},inputSearchRoot:{width:"100%"},inputSearch:{paddingLeft:e.spacing.unit},cardMessage:{borderRadius:"6px",height:"calc(100vh - "+13*e.spacing.unit+"px)",display:"flex",flexDirection:"column",justifyContent:"flex-end"},cardListFriend:{marginTop:2*e.spacing.unit,borderRadius:"6px",height:"calc(100vh - "+21*e.spacing.unit+"px)",overflow:"auto"},findUser:{overflow:"auto",height:"calc(100vh - "+21*e.spacing.unit+"px)"},typing:{display:"none"}}}))(Xt)),ea=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(Zt,null),history:this.props.history})}}]),a}(n.Component),ta=a(762),aa=a(778),na=a(777);function ra(){return function(e){new Promise((function(e,t){return O.a.get(k.a.api_url+"/actions/getHotUsers",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))})).then((function(t){e(function(e){return{type:"GET_HOT_USER_SUCCESSFUL",hotUserData:e}}(t))})).catch((function(e){console.log("Error at get getHotUsersAPI: "+e)}))}}function oa(){return function(e){e({type:"GET_HOME_DATA_START"}),new Promise((function(e,t){return O.a.get(k.a.api_url+"/actions/getHomeSongs",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))})).then((function(t){e(function(e){return{type:"GET_HOME_DATA_SUCCESSFUL",homeData:e}}(t))})).catch((function(t){e(function(e){return{type:"GET_HOME_DATA_FAIL",err:e}}(t))}))}}function ia(e){return{type:"SET_MUSIC_SELECTED",musicSelected:e}}function ca(){return function(e){e({type:"RANKING_START"}),new Promise((function(e,t){return O.a.get(k.a.api_url+"/ethereums/getTimeRanking",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))})).then((function(t){e({type:"SET_RANKING",rankingdata:t})})).catch((function(t){e(function(e){return{type:"SET_ERR",err:e}}(t))}))}}a(575);var la=f.a.Text,sa=f.a.Title,ua=[{},{},{},{},{},{},{},{},{},{}],ma=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getRanking()}},{key:"render",value:function(){var e=this,t=this.props.appReducer.rankingdata;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(sa,{level:4,type:"secondary"}," B\u1ea2NG X\u1ebeP H\u1ea0NG TU\u1ea6N "),null===t?r.a.createElement(aa.a,{itemLayout:"horizontal",dataSource:ua,renderItem:function(e){return r.a.createElement(aa.a.Item,null,r.a.createElement(na.a,{loading:!0,active:!0,paragraph:{rows:1},avatar:{shape:"square",size:70}}))}}):r.a.createElement(aa.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(t,a){return t?r.a.createElement(aa.a.Item,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(sa,{level:4,style:{alignSelf:"center",marginRight:10},type:0===a?"danger":1===a?"warning":2===a?"":"secondary"},a+1)),r.a.createElement(xe.a,{title:t.view+" view",placement:"leftTop"},r.a.createElement(aa.a.Item.Meta,{avatar:r.a.createElement($e.a,{shape:"square",size:70,src:window.$linkIPFS+t.image,onClick:function(){return e.props.history.push("/song/".concat(t._id))}}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14,height:20},type:"link",onClick:function(){e.props.set_music_selected(t)}},t.name),description:r.a.createElement("div",null,t.artist,r.a.createElement("br",null),r.a.createElement("div",{className:"row-space-between"},r.a.createElement(xe.a,{title:t.userUpload.nickName,placement:"leftTop"},r.a.createElement($e.a,{shape:"circle",size:"small",src:window.$linkIPFS+t.userUpload.avatar,onClick:function(){return e.props.history.push("/page/".concat(t.userUpload.addressEthereum))}})),r.a.createElement(la,{style:{alignSelf:"center"},code:!0},t.downloadWeekRanking," Downloads")))}))):null}}))}}]),a}(r.a.Component),pa=Object(d.g)(Object(m.b)((function(e){return{appReducer:e.appReducer}}),(function(e){return{set_music_selected:function(t){return e(ia(t))},getRanking:function(){return e(ca())}}}))(ma)),da=a(779),fa=f.a.Text,ha=da.a.Meta,ga=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement(xe.a,{style:{display:"flex"},title:t.view+" view page",placement:"top",onClick:function(){return e.props.history.push("/page/".concat(t.addressEthereum))}},r.a.createElement(da.a,{hoverable:!0,size:"small",cover:r.a.createElement($e.a,{alt:"music background",size:this.props.songPage?160:170,src:window.$linkIPFS+t.avatar}),bodyStyle:{padding:"10px",textAlign:"center"},bordered:!1,style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(ha,{title:r.a.createElement(fa,{style:{fontSize:15},type:"warning"},t.nickName),description:r.a.createElement(fa,{style:{fontSize:14},type:"secondary"},t.follow," Follows")})))}}]),a}(r.a.Component),Ea=Object(d.g)(Object(m.b)((function(e){return{}}),(function(e){return{set_music_selected:function(t){return e(ia(t))}}}))(ga)),ya=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(na.a,{active:!0,title:!1,avatar:{shape:"circle",size:180},paragraph:!1}),r.a.createElement(na.a,{active:!0,title:{width:130},paragraph:{rows:1,width:180}}))}}]),a}(r.a.Component),ba=f.a.Text,va=da.a.Meta,Sa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.songInfo,n=t.contract;return r.a.createElement(xe.a,{title:a.view+" view song",placement:"top"},n?r.a.createElement(da.a,{hoverable:!0,size:"small",cover:r.a.createElement("img",{onClick:function(){return e.props.history.push("/mainContract/".concat(n._id))},className:"img-background-music",alt:"music background",src:window.$linkIPFS+n.songID.image}),bodyStyle:{padding:"10px"},bordered:!1},r.a.createElement(va,{title:r.a.createElement(xe.a,{style:{display:"flex",flexDirection:"column"},title:n.songID.name,placement:"top",onClick:function(){return e.props.history.push("/song/".concat(n.songID._id))}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:13,height:20,width:"100%"},type:"link"},n.songID.name),r.a.createElement(ba,{style:{fontSize:13},type:"secondary"},n.nameContractForm))),description:n.signerID?r.a.createElement(xe.a,{style:{display:"flex"},title:n.signerID.nickName,placement:"bottom",onClick:function(){return e.props.history.push("/page/".concat(n.signerID.addressEthereum))}},r.a.createElement($e.a,{shape:"circle",style:{marginRight:5},size:"small",src:window.$linkIPFS+n.signerID.avatar}),r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14,height:20,width:"70%",overflow:"hiden"},type:"link"},r.a.createElement(ba,{type:"warning",style:{alignSelf:"center"}},n.signerID.nickName))):n.ownerID?r.a.createElement(xe.a,{style:{display:"flex"},title:n.ownerID.nickName,placement:"bottom",onClick:function(){return e.props.history.push("/page/".concat(n.ownerID.addressEthereum))}},r.a.createElement($e.a,{shape:"circle",style:{marginRight:5},size:"small",src:window.$linkIPFS+n.ownerID.avatar}),r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14,height:20,width:"70%",overflow:"hiden"},type:"link"},r.a.createElement(ba,{type:"warning",style:{alignSelf:"center"}},n.ownerID.nickName))):null})):r.a.createElement(da.a,{hoverable:!0,size:"small",cover:r.a.createElement("img",{onClick:function(){return e.props.history.push("/song/".concat(a._id))},className:"img-background-music",alt:"music background",src:window.$linkIPFS+a.image}),bodyStyle:{padding:"10px"},bordered:!1},r.a.createElement(va,{title:r.a.createElement(xe.a,{style:{display:"flex",flexDirection:"column"},title:a.name,placement:"top",onClick:function(){e.props.set_music_selected(a)}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:13,height:20,width:"100%"},type:"link"},a.name),r.a.createElement(ba,{style:{fontSize:13},type:"secondary"},a.artist))),description:r.a.createElement(xe.a,{style:{display:"flex"},title:a.userUpload.nickName,placement:"bottom",onClick:function(){return e.props.history.push("/page/".concat(a.userUpload.addressEthereum))}},r.a.createElement($e.a,{shape:"circle",style:{marginRight:5},size:"small",src:window.$linkIPFS+a.userUpload.avatar}),r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14,height:20,width:"70%",overflow:"hiden"},type:"link"},r.a.createElement(ba,{type:"warning",style:{alignSelf:"center"}},a.userUpload.nickName)))})))}}]),a}(r.a.Component),Oa=Object(d.g)(Object(m.b)((function(e){return{}}),(function(e){return{set_music_selected:function(t){return e(ia(t))}}}))(Sa)),Ca=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(na.a,{active:!0,title:!1,avatar:{shape:"square",size:160},paragraph:!1}),r.a.createElement("br",null),r.a.createElement(na.a,{active:!0,title:!1,avatar:{size:"small"},paragraph:{rows:1,width:120}}))}}]),a}(r.a.Component),ka=f.a.Title,wa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getHomeSongs(),this.props.getHotUsers()}},{key:"render",value:function(){var e=this.props.appReducer;return r.a.createElement("div",null,r.a.createElement(at.a,{gutter:[8,0]},r.a.createElement(ta.a,{autoplay:!0},r.a.createElement("div",null,r.a.createElement("img",{style:{width:"100%",height:"400px",objectFit:"cover"},alt:"Music test",src:"https://ipfs.fotra.tk/ipfs/QmQ6qMBCo3yT6QQ6mbGG4VgiauzDn9tJosCBFPTDFJ2AFd"})),r.a.createElement("div",null,r.a.createElement("img",{style:{width:"100%",height:"400px",objectFit:"cover"},alt:"Music test",src:"https://ipfs.fotra.tk/ipfs/QmUFZGKFic3GVeWmkeGu1p2BpAYMPj5ZTamvwv29uRBg4C"})),r.a.createElement("div",null,r.a.createElement("img",{style:{width:"100%",height:"400px",objectFit:"cover"},alt:"Music test",src:"https://ipfs.fotra.tk/ipfs/Qmc1qzzq83TfQQcLNtAbEGThQiBqP4EFgmtuotndbVZ8T1"})),r.a.createElement("div",null,r.a.createElement("img",{style:{width:"100%",height:"400px",objectFit:"cover"},alt:"Music test",src:"https://ipfs.fotra.tk/ipfs/QmUgWzqE6tJPrA1aKT7hQydgMARCe9akiX6yCDMmAHm9B1"})))),r.a.createElement(at.a,{gutter:[24,0],style:{marginTop:20}},r.a.createElement(nt.a,{span:17},r.a.createElement(at.a,{gutter:[8,0],style:{marginTop:20}},r.a.createElement(ka,{level:4,type:"secondary"},"THE MOST HEAD SONG")),r.a.createElement(at.a,{gutter:[8,0],type:"flex",justify:"space-around"},e.homeData?e.homeData.mostView.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:6,style:{width:190,marginTop:20}},r.a.createElement(Oa,{songInfo:e}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)))),r.a.createElement(at.a,{gutter:[8,0],style:{marginTop:20}},r.a.createElement(ka,{level:4,type:"secondary"},"NEW RELEASE")),r.a.createElement(at.a,{gutter:[8,0],type:"flex",justify:"space-around"},e.homeData?e.homeData.mostNew.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:6,style:{width:190,marginTop:20}},r.a.createElement(Oa,{songInfo:e}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(Ca,null)))),r.a.createElement(at.a,{gutter:[8,0],style:{marginTop:20}},r.a.createElement(ka,{level:4,type:"secondary"},"HOT SINGER")),r.a.createElement(at.a,{gutter:[8,0],type:"flex",justify:"space-around"},e.hotUserData?e.hotUserData.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:6,style:{width:180,marginTop:20}},r.a.createElement(Ea,{user:e}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(ya,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(ya,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(ya,null)),r.a.createElement(nt.a,{span:6,style:{marginTop:20}},r.a.createElement(ya,null))))),r.a.createElement(nt.a,{span:7},r.a.createElement(pa,null))))}}]),a}(n.Component),ja=Object(m.b)((function(e){return{appReducer:e.appReducer}}),(function(e){return{getHomeSongs:function(){return e(oa())},getHotUsers:function(){return e(ra())}}}))(wa),Ia=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(ja,null),history:this.props.history})}}]),a}(n.Component),_a=(a(587),f.a.Text,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{class:"view"},r.a.createElement("img",{src:Qe.a,alt:"Justice music",style:{width:"70px",height:"70px"}}),r.a.createElement("a",{class:"plane main",href:"https://jumu.tk/login"},r.a.createElement("div",{class:"circle"}),r.a.createElement("div",{class:"circle"}),r.a.createElement("div",{class:"circle"}),r.a.createElement("div",{class:"circle"}),r.a.createElement("div",{class:"circle"}),r.a.createElement("div",{class:"circle"})))}}]),a}(n.Component)),Da=a(248),Ta=(a(588),a(783)),Aa=a(764),Ra=a(769),xa=a(763);function Fa(e){return function(t){t(Ba(!0)),le(e).then((function(e){t({type:"SET_USER_ISO_DATA",isoData:e})})).then((function(){t(Ba(!1))})).catch((function(e){t(Ba(!1)),t(za(e))}))}}function Ua(e){return function(t){t(Ha(!0)),function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/ethereums/getUserDownload/".concat(e),{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}(e).then((function(e){t({type:"SET_USER_DOWNLOAD_DATA",downloadData:e})})).then((function(){t(Ha(!1))})).catch((function(e){t(Ha(!1)),t(za(e))}))}}function Na(e){return function(t){t(Ma(!0)),function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/ethereums/getUserUpload/".concat(e),{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}(e).then((function(e){t({type:"SET_USER_UPLOAD_DATA",uploadData:e})})).then((function(){t(Ma(!1))})).catch((function(e){t(Ma(!1)),t(za(e))}))}}function Pa(e){return function(t){t(Ga(!0)),function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/actions/userPage?userName="+e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}(e).then((function(e){return t({type:"SET_USER_INFO_DATA",userInfoData:e}),e})).then((function(e){t(Ga(!1)),t(Na(e.addressEthereum)),t(Ua(e.addressEthereum)),t(Fa(e.addressEthereum))})).catch((function(e){t(Ga(!1)),t({type:"SET_ERROR_GET_USER_PAGE",errorPage:e})}))}}function La(e){return{type:"SET_IS_FOLLOW_PAGE",setFollow:e}}function Ma(e){return{type:"SET_LOADING_UPLOAD",loadingUpload:e}}function Ha(e){return{type:"SET_LOADING_DOWNLOAD",loadingDownload:e}}function Ba(e){return{type:"SET_LOADING_ISO",loadingIsoData:e}}function Ga(e){return{type:"SET_LOADING_USER_INFO",loadingUserData:e}}function za(e){return{type:"SET_ERROR_GET_USER_UPLOAD",errorUpload:e}}var Ka=f.a.Text,$a=g.a.create({name:"form_in_modal"})(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={date:86400},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,o=t.onCreate,i=t.form.getFieldDecorator;return r.a.createElement(h.a,{visible:a,title:"Using ISO",okText:"Submit",onCancel:n,onOk:o},r.a.createElement(g.a,{layout:"horizontal"},r.a.createElement(g.a.Item,{label:"Offer Percent"},i("offerPercent",{rules:[{required:!0,message:"Please input cost of this song!"}],initialValue:5e3})(r.a.createElement(Ye.a,{min:1,max:5e4,step:1,style:{width:150},formatter:function(e){return"".concat(e,"%").replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace("%","").replace(/\$\s?|(,*)/g,"")}}))),r.a.createElement(g.a.Item,{label:"Offer Amount"},i("offerAmount",{rules:[{required:!0,message:"Please input cost of this song!"}],initialValue:1e6})(r.a.createElement(Ye.a,{min:0,style:{width:150},formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),r.a.createElement(g.a.Item,{label:"Offer Maintain"},i("maintain",{rules:[{required:!0,message:"Please input cost of this song!"}],initialValue:this.state.date,onChange:function(t){e.setState({date:t})}})(r.a.createElement(Ye.a,{min:0,max:2592e3,style:{width:150},formatter:function(e){return"\ud83d\udd57 ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\ud83d\udd57\s?|(,*)/g,"")}})))))}}]),a}(r.a.Component)),Va=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1})},e.handleCreate=function(){var t=e.formRef.props.form;t.validateFields((function(a,n){if(a)return xa.a.error("Please fill out all fields");e.openUploadNotification(n),t.resetFields(),e.setState({visible:!1})}))},e.openUploadNotification=function(t){X("Uploading ...");var a=Object(U.a)(Object(U.a)({},t),{},{idFile:e.props.idFile});console.log(a),oe(a).then((function(t){ee(t),k.a.provider.waitForTransaction(t).then((function(){e.props.getISOAddress(e.props.userReducer.user.addressEthereum)}))})).catch((function(e){Z(e)}))},e.saveFormRef=function(t){e.formRef=t},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.circle?r.a.createElement(xe.a,{title:"Using ISO this song",placement:"top"},r.a.createElement(v.a,{disabled:this.props.disabled,shape:"circle",type:"danger",ghost:!0,icon:"usergroup-add",onClick:this.showModal})):r.a.createElement(xe.a,{title:"Using ISO this song",placement:"leftTop"},r.a.createElement(v.a,{disabled:this.props.disabled,type:"danger",ghost:!0,icon:"usergroup-add",onClick:this.showModal},r.a.createElement(Ka,null,"Using ISO"))),r.a.createElement($a,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate}))}}]),a}(r.a.Component),qa=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{getISOAddress:function(t){return e(Fa(t))}}}))(Va),Wa=f.a.Text,Ya=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleBuySong=function(t){X("Downloading ..."),re({_idFile:t}).then((function(t){ee(t),k.a.provider.waitForTransaction(t).then((function(){e.props.getUserDownload(e.props.userReducer.user.addressEthereum)}))})).catch((function(e){Z(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.circle?r.a.createElement(xe.a,{title:"Buy this song",placement:"top"},r.a.createElement(v.a,{shape:"circle",type:"primary",ghost:!0,icon:"download",onClick:function(){e.handleBuySong(e.props.idFile)}})):r.a.createElement(xe.a,{title:"Buy this song",placement:"leftTop"},r.a.createElement(v.a,{type:"primary",ghost:!0,icon:"download",onClick:function(){e.handleBuySong(e.props.idFile)}},r.a.createElement(Wa,null,"Buy"))))}}]),a}(r.a.Component),Ja=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{getUserDownload:function(t){return e(Ua(t))}}}))(Ya),Qa=f.a.Text,Xa=f.a.Title,Za=da.a.Meta,en=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleBuySong=function(t){X("Downloading ..."),re({_idFile:t}).then((function(t){ee(t),k.a.provider.waitForTransaction(t).then((function(){e.props.getUserDownload(e.props.userReducer.user.addressEthereum)}))})).catch((function(e){Z(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"songInfo",dataIndex:"music",render:function(t){return r.a.createElement(Za,{avatar:r.a.createElement($e.a,{shape:"square",size:50,src:window.$linkIPFS+t.image,alt:"Music photo",onClick:function(){return e.props.history.push("/song/".concat(t._id))}}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14,height:20},type:"link",onClick:function(){e.props.set_music_selected(t)}},t.name),description:r.a.createElement(Qa,{type:"secondary"},t.artist)})}},{title:"Tags",key:"tags",render:function(){return r.a.createElement("span",null,r.a.createElement(Ta.a,{color:"volcano"},"HOT"))}},{title:"view",dataIndex:"music.view",render:function(e){return r.a.createElement("div",null,r.a.createElement(y.a,{type:"customer-service",style:{marginRight:"10px",color:"#1da1f2",fontSize:17}}),r.a.createElement(Qa,{type:"secondary"},te(e)))}},{title:"cost",render:function(e){return r.a.createElement("div",null,r.a.createElement(y.a,{type:"pay-circle",style:{marginRight:"10px",color:"#1da1f2",fontSize:17}}),r.a.createElement(Qa,{type:"secondary"},te(e.price)," HAK"))}},{title:"action",key:"action",render:function(t){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(qa,{disabled:!(!t.IsISO&&e.props.userReducer.user.id===e.props.pageReducer.userInfoData._id),idFile:t.idFile,circle:!0}),r.a.createElement(Aa.a,{type:"vertical",style:{height:"30px"}}),r.a.createElement(xe.a,{title:"Get a contract",placement:"top"},r.a.createElement(v.a,{type:"primary",shape:"circle",icon:"solution",ghost:!0,onClick:function(){return e.props.history.push("".concat(t.music.userUpload==e.props.userReducer.user.id?"/contractFormManager":"/tempContract/".concat(t.music._id)))}})),r.a.createElement(Aa.a,{type:"vertical",style:{height:"30px"}}),r.a.createElement(Ja,{idFile:t.idFile,circle:!0}))}}];return r.a.createElement(Ra.a,{size:"middle",showHeader:!1,title:function(){return r.a.createElement(Xa,{level:4,style:{color:"#2daaed"}},e.props.tableUpload?'B\xc0I H\xc1T C\u1ee6A "'.concat(e.props.pageName,'"'):'B\xc0I H\xc1T M\xc0 "'.concat(e.props.pageName,'" \u0110\xc3 MUA'))},columns:t,rowKey:function(e){return e.idFile},dataSource:this.props.tableUpload?this.props.pageReducer.uploadData:this.props.pageReducer.downloadData,loading:this.props.tableUpload?this.props.pageReducer.loadingUpload:this.props.pageReducer.loadingDownload})}}]),a}(r.a.Component),tn=Object(d.g)(Object(m.b)((function(e){return{pageReducer:e.pageReducer,userReducer:e.userReducer}}),(function(e){return{getUserDownload:function(t){return e(Ua(t))},set_music_selected:function(t){return e(ia(t))}}}))(en)),an=a(122),nn=(a(636),f.a.Text),rn=g.a.create({name:"form_in_modal"})(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,o=e.form.getFieldDecorator;return r.a.createElement(h.a,{visible:t,title:"Invest ISO",okText:"Submit",onCancel:a,onOk:n},r.a.createElement(g.a,{layout:"horizontal"},r.a.createElement(g.a.Item,{label:"Offer Amount"},o("investAmount",{rules:[{required:!0,message:"Please input amount to invest!"}],initialValue:0})(r.a.createElement(Ye.a,{min:0,style:{width:150},formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}})))))}}]),a}(r.a.Component)),on=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1})},e.handleCreate=function(){var t=e.formRef.props.form;t.validateFields((function(a,n){if(a)return xa.a.error("Please fill out all fields");e.openUploadNotification(n),t.resetFields(),e.setState({visible:!1})}))},e.openUploadNotification=function(t){X("Invest Loading ...");var a=Object(U.a)(Object(U.a)({},t),{},{idFile:e.props.idFile});console.log(a),ie(a).then((function(e){ee(e)})).catch((function(e){Z(e)}))},e.saveFormRef=function(t){e.formRef=t},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(xe.a,{title:"Invest this song",placement:"leftTop"},r.a.createElement(v.a,{disabled:this.props.disabled,type:"primary",ghost:!0,icon:"bg-colors",onClick:this.showModal},r.a.createElement(nn,null,"Invest"))),r.a.createElement(rn,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate}))}}]),a}(r.a.Component),cn=f.a.Paragraph,ln=f.a.Text,sn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(cn,{style:{padding:5,margin:5},ellipsis:!0},r.a.createElement(ln,{strong:!0},this.props.title," : "),r.a.createElement(ln,null,this.props.link?r.a.createElement("a",{href:this.props.link},this.props.content):r.a.createElement(ln,{type:"secondary"}," ",this.props.content," ")))}}]),a}(r.a.Component),un=f.a.Text,mn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e}return Object(l.a)(a,[{key:"onClickOk",value:function(e){this.setState({visible:e})}},{key:"onClickCancel",value:function(e){this.setState({visible:e})}},{key:"render",value:function(){var e=this,t=this.props.record,a=[{title:"Address",dataIndex:"investor",key:"address",ellipsis:!0,render:function(t){return r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:14},type:"link",onClick:function(){return e.props.history.push("/page/".concat(t))}},t)}},{title:"Invest percent",dataIndex:"percentage",key:"percent",render:function(e){return r.a.createElement(un,null,parseFloat(e/1e3).toFixed(3)," %")}},{title:"Invest Amount",dataIndex:"amount",key:"amount",render:function(e){return r.a.createElement(un,null,te(e)," HAK")}}];return r.a.createElement("div",null,r.a.createElement(xe.a,{title:"Show more details of this song",placement:"rightTop"},r.a.createElement(v.a,{type:"primary",ghost:!0,icon:"info-circle",onClick:this.showModal},r.a.createElement(un,null,"Detail ISO"))),r.a.createElement(h.a,{title:t.music.name+" - ISO",bodyStyle:{padding:0,margin:0},visible:this.state.visible,onCancel:function(){return e.onClickCancel(!1)},footer:[r.a.createElement(on,{disabled:Y().unix()>=t.timeExpired,idFile:t.idFile,center:!0})]},r.a.createElement(bn,{record:t,action:!1}),r.a.createElement(sn,{title:"Total Offer Amount",content:te(t.offerAmount)+" HAK"}),r.a.createElement(sn,{title:"Total Offer Percent",content:parseFloat(t.offerPercent/1e3).toFixed(3)+"%"}),r.a.createElement(sn,{title:"Amount Remaining",content:te(t.amountRemaining)+" HAK"}),r.a.createElement(sn,{title:"Owner Percent Remaining",content:parseFloat(t.ownerPercent/1e3).toFixed(3)+"%"}),r.a.createElement(sn,{title:"Invest table",content:""}),r.a.createElement(Ra.a,{rowKey:function(e){return e.idFile},columns:a,dataSource:t.investListISO,pagination:!1})))}}]),a}(r.a.Component),pn=Object(d.g)(Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{}}))(mn)),dn=a(775),fn=a(374),hn=da.a.Meta,gn=dn.a.Countdown,En=f.a.Text,yn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.record,n=t.action;return r.a.createElement(da.a,{hoverable:!0,cover:r.a.createElement("img",{className:"img-background-music",alt:"music background",src:window.$linkIPFS+a.music.image}),bodyStyle:{padding:"15px",width:"100%",border:"0px solid green"},actions:n?[r.a.createElement(pn,{record:a})]:null},r.a.createElement(hn,{style:{paddingBottom:10},avatar:r.a.createElement($e.a,{size:59,src:window.$linkIPFS+a.user.avatar,alt:a.user.nickName}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:16},type:"link",onClick:function(){return e.props.history.push("/page/".concat(a.user.addressEthereum))}},r.a.createElement(En,{style:{fontSize:16},type:"warning"},a.user.nickName)),description:r.a.createElement(En,null," ",te(a.user.follow)," Follow ")}),r.a.createElement(v.a,{style:{textAlign:"center",padding:0,fontSize:14,height:20},type:"link",onClick:function(){return e.props.history.push("/song/".concat(a.music._id))}},a.music.name),r.a.createElement("br",null),r.a.createElement(En,{type:"secondary",style:{marginTop:"10px"}},"Percent"),r.a.createElement(fn.a,{style:{paddingRight:"10px"},strokeColor:{from:"#108ee9",to:"#FF5733"},percent:Number(parseFloat(100-100*a.amountRemaining/a.offerAmount).toFixed(1)),status:"active",showInfo:!0}),Y().unix()>=a.timeExpired?r.a.createElement("div",null,r.a.createElement(En,{type:"secondary"},"Time Remaining"),r.a.createElement("br",null),r.a.createElement(En,{style:{fontSize:18},type:"danger"},"Expired")):r.a.createElement(gn,{title:"Time Remaining",valueStyle:{fontSize:"16px"},value:1e3*a.timeExpired,format:"D Ng\xe0y H Gi\u1edd m Ph\xfat s"}))}}]),a}(r.a.Component),bn=Object(d.g)(yn),vn=(a(646),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.props.pageReducer.isoData.length),r.a.createElement("div",{style:{width:"100%"}},this.props.pageReducer.loadingIsoData?r.a.createElement("div",{className:"loading-data-iso"}," ",r.a.createElement(j.a,{size:"large"})," "):0===this.props.pageReducer.isoData.length?r.a.createElement("div",{className:"loading-data-iso"}," ",r.a.createElement(an.a,{image:an.a.PRESENTED_IMAGE_SIMPLE})," "):r.a.createElement(at.a,{gutter:[{xs:8,sm:16,md:24,lg:32},20]},this.props.pageReducer.isoData.map((function(e){return r.a.createElement(nt.a,{key:e.idFile,span:8},r.a.createElement(bn,{record:e,action:!0}))}))))}}]),a}(r.a.Component)),Sn=(Object(m.b)((function(e){return{pageReducer:e.pageReducer}}),(function(e){return{getISOAddress:function(t){return e(le(t))}}}))(vn),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Re.a,{status:"404",title:"404",subTitle:this.props.subTitle,extra:r.a.createElement(v.a,{type:"primary",onClick:function(){return e.props.history.push("/home")}},"Back Home")})}}]),a}(r.a.Component)),On=a(765),Cn=a(767);function kn(e,t){if("Image"===t){var a="image/jpeg"===e.type||"image/png"===e.type;a||xa.a.error("You can only upload JPG/PNG file!");var n=e.size/1024/1024<2;return n||xa.a.error("Image must smaller than 2MB!"),a&&n}if("Music"===t){var r="audio/mp3"===e.type;return r||xa.a.error("You can only upload Mp3 file!"),r}}var wn=g.a.create({name:"form_in_modal"})(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={USD:0,costUSD:23e3},e.resetUSD=function(){e.setState({USD:0})},e.normFileMusic=function(e){return kn(e.file,"Music")?(console.log("Upload event:",e),Array.isArray(e)?e:(2===e.fileList.length&&(e.fileList=e.fileList.slice(-1)),e&&e.fileList)):void 0},e.normFileImage=function(e){return kn(e.file,"Image")?(console.log("Upload event:",e),Array.isArray(e)?e:(2===e.fileList.length&&(e.fileList=e.fileList.slice(-1)),e&&e.fileList)):void 0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,o=t.onCreate,i=t.form.getFieldDecorator,c=Ae.a.Option;return r.a.createElement(h.a,{visible:a,title:"Upload media",okText:"Submit",onCancel:n,onOk:o},r.a.createElement(g.a,{layout:"vertical"},r.a.createElement(g.a.Item,{label:"Media's name"},i("SongName",{rules:[{required:!0,message:"Please input the name of this song!"}]})(r.a.createElement(E.a,{placeholder:"Please select song's name"}))),r.a.createElement(g.a.Item,{label:"Artists's name"},i("ArtistsName",{rules:[{required:!0,message:"Please input artists'name!"}]})(r.a.createElement(E.a,{placeholder:"Please select artists's name"}))),r.a.createElement(g.a.Item,{label:"Tags"},i("Tags",{rules:[{message:"Please select song's tag ",type:"array"}]})(r.a.createElement(Ae.a,{mode:"multiple",placeholder:"Please select song's tag"},r.a.createElement(c,{value:"Rap"},"Rap"),r.a.createElement(c,{value:"Rock"},"Rock"),r.a.createElement(c,{value:"young"},"Young"),r.a.createElement(c,{value:"pre-war"},"Pre-war"),r.a.createElement(c,{value:"lyrical"},"Lyrical"),r.a.createElement(c,{value:"US-UK"},"US-UK")))),r.a.createElement(g.a.Item,{label:"Price HAK"},i("Price",{rules:[{required:!0,message:"Please input cost of this song!"}],initialValue:0,onChange:function(t){e.setState({USD:t/e.state.costUSD})}})(r.a.createElement(Ye.a,{min:0,max:1e10})),r.a.createElement("span",{className:"ant-form-text"}," HAK"),r.a.createElement("span",{className:"ant-form-text"},"\u279c   ",this.state.USD," USD")),r.a.createElement(g.a.Item,{label:"Contract permission"},i("ContractPermission",{initialValue:!0,valuePropName:"checked"})(r.a.createElement(On.a,null))),r.a.createElement(g.a.Item,{label:"Upload Image"},i("Image",{valuePropName:"fileList",getValueFromEvent:this.normFileImage})(r.a.createElement(Cn.a,{name:"file",action:k.a.api_url+"/users/upload",listType:"picture"},r.a.createElement(v.a,null,r.a.createElement(y.a,{type:"upload"})," Click to upload image")))),r.a.createElement(g.a.Item,{label:"Upload Music"},i("Music",{valuePropName:"fileList",getValueFromEvent:this.normFileMusic,rules:[{required:!0}]})(r.a.createElement(Cn.a.Dragger,{action:k.a.api_url+"/users/upload"},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(y.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload music"))))))}}]),a}(r.a.Component)),jn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1})},e.handleCreate=function(){var t=e.formRef.props.form;t.validateFields((function(a,n){return a?xa.a.error("please fill out all fields"):"uploading"==n.Music[0].status||"uploading"==n.Image[0].status?h.a.error({title:"Please waiting for music or image upload!"}):(t.resetFields(),e.child.resetUSD(),e.setState({visible:!1}),void e.openUploadNotification(n))}))},e.saveFormRef=function(t){e.formRef=t},e.openUploadNotification=function(t){X("Uploading ..."),console.log(t),ne({ether:{hash:t.Music[0].response.result,price:t.Price},server:{hash:t.Music[0].response.result,image:t.Image[0].response.result,name:t.SongName,artist:t.ArtistsName,tags:t.Tags,contractPermission:t.ContractPermission}}).then((function(t){ee(t),k.a.provider.waitForTransaction(t).then((function(){return e.props.getUserUpload(e.props.userReducer.user.addressEthereum),h.a.success({title:"Update contract success!"})}))})).catch((function(e){return Z("Please check your balance and upload again!"),h.a.error({title:'Error: "Please check your balance and upload again!"'})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{type:"danger",onClick:this.showModal},"Upload"),r.a.createElement(wn,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate,onRef:function(t){return e.child=t}}))}}]),a}(r.a.Component),In=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{getUserUpload:function(t){return e(Na(t))}}}))(jn);function _n(){return function(e){new Promise((function(e,t){return O.a.get(k.a.api_url+"/actions/getRelatedUser",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))})).then((function(t){e(function(e){return{type:"GET_RELATED_USER_SUCCESSFUL",relatedUserData:e}}(t))})).catch((function(e){console.log("Error at get relatedUserData: "+e)}))}}function Dn(e){return function(t){(function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/actions/getSongSameSinger/?idUserUpload=".concat(e.idUserUpload,"&exceptedSongID=").concat(e.exceptedSongID),{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))})(e).then((function(e){t(function(e){return{type:"GET_SONG_SAME_SINGER_SUCCESSFUL",songSameSingerData:e}}(e))})).catch((function(e){console.log("Error at get songSameSingerData: "+e)}))}}function Tn(e){return function(t){t(An(!0)),function(e){return new Promise((function(t,a){return O.a.get(k.a.api_url+"/actions/getSongByID?id="+e,{headers:Q()}).then((function(e){if(0===e.data.status)return a(e.data.error.message);t(e.data.result)})).catch((function(e){return a(e)}))}))}(e).then((function(e){t(function(e){return{type:"SET_SONG_DATA",songInfo:e}}(e)),t(Dn({idUserUpload:e.userUpload._id,exceptedSongID:e._id}))})).then((function(){t(An(!1))})).catch((function(e){t(An(!1)),t({type:"SET_ERROR_GET_SONG_DATA",error:e})}))}}function An(e){return{type:"SET_LOADING_SONG_DATA",isLoading:e}}var Rn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onHanleFollow=function(t){pe({followedID:e.props.ownerSongID}).then((function(a){e.props.isPage?e.props.set_is_follow_page(t):(console.log("this is console log is page"),console.log(e.props.isPage),e.props.set_is_follow_song(t))}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.ownerSongID===this.props.userReducer.user.id?r.a.createElement(In,null):r.a.createElement(v.a,{type:"danger",onClick:function(){return e.onHanleFollow(!e.props.isFollowed)}},this.props.isFollowed?"Unfollow":"Follow")}}]),a}(r.a.Component),xn=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{set_is_follow_song:function(t){return e(function(e){return{type:"SET_IS_FOLLOW_SONG",setFollow:e}}(t))},set_is_follow_page:function(t){return e(La(t))}}}))(Rn),Fn=f.a.Paragraph,Un=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.link,n=e.content;return r.a.createElement("div",{style:{display:"flex",alignItems:"center",paddingBottom:5,marginBottom:15}},r.a.createElement(y.a,{type:t,style:{marginRight:10,fontSize:16,color:"#1da1f2"}}),r.a.createElement(Fn,{style:{marginBottom:0},ellipsis:!0},r.a.createElement("a",{href:a,style:{color:"#888888"}},n)))}}]),a}(r.a.Component),Nn=Da.a.TabPane,Pn=f.a.Title,Ln=f.a.Text,Mn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.userName;t!==this.props.userName&&this.props.getUserPage(t)}},{key:"componentDidMount",value:function(){var e;this.props.getUserPage(this.props.userName),e={userName:this.props.userName},new Promise((function(t,a){return O.a.post(k.a.api_url+"/users/postViewUser",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}},{key:"render",value:function(){if(this.props.pageReducer.errorPage)return r.a.createElement(Sn,{history:this.props.history,subTitle:"Page not found. Please try another link!"});if(!this.props.pageReducer.userInfoData)return r.a.createElement(Ue,null);var e=this.props.pageReducer.userInfoData,t=e.follow,a=e.phone,n=e.facebook,o=e.youtube,i=e.home,c=e.coverPhoto,l=e.avatar,s=e.nickName,u=e._id,m=e.isFollowed,p=r.a.createElement(xn,{ownerSongID:u,isFollowed:m,isPage:!0});return r.a.createElement("div",null,r.a.createElement(at.a,null,r.a.createElement(nt.a,{span:24},r.a.createElement("div",{style:{width:"100%",height:"300px",backgroundImage:"url('https://ipfs.fotra.tk/ipfs/".concat(c,"')"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center center"}}))),r.a.createElement(at.a,{style:{paddingTop:"15px"}},r.a.createElement(nt.a,{span:6},r.a.createElement("div",{className:"logo-name"},r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement($e.a,{style:{boxShadow:"0 0 60px 2px #f29f99"},size:160,src:window.$linkIPFS+l,alt:"Avatar photo"})),r.a.createElement("div",null,r.a.createElement(Pn,{level:4},s),r.a.createElement(Ln,{type:"secondary"},t," Follow"))),a?r.a.createElement(Un,{icon:"phone",link:"linkPhone",content:a}):null,o?r.a.createElement(Un,{icon:"youtube",link:"linkYoutube",content:o}):null,n?r.a.createElement(Un,{icon:"facebook",link:"linkFacebook",content:n}):null,i?r.a.createElement(Un,{icon:"home",link:"linkHome",content:i}):null),r.a.createElement(nt.a,{span:18},r.a.createElement(Da.a,{tabBarExtraContent:p},r.a.createElement(Nn,{tab:"B\xe0i h\xe1t \u0111\xe3 \u0111\u0103ng",key:"1"},r.a.createElement(tn,{tableUpload:!0,pageName:s})),r.a.createElement(Nn,{tab:"B\xe0i h\xe1t \u0111\xe3 mua",key:"3"},r.a.createElement(tn,{pageName:s})),r.a.createElement(Nn,{tab:"S\u1ef1 ki\u1ec7n",key:"4"},"Ch\u01b0a c\xf3 s\u1ef1 ki\u1ec7n n\xe0o \u0111\u01b0\u1ee3c di\u1ec5n ra")))))}}]),a}(n.Component),Hn=Object(m.b)((function(e){return{pageReducer:e.pageReducer,userReducer:e.userReducer}}),(function(e){return{getUserPage:function(t){return e(Pa(t))},set_is_follow_page:function(t){return e(La(t))}}}))(Mn),Bn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(Hn,{userName:this.props.match.params.userName,history:this.props.history}),history:this.props.history})}}]),a}(n.Component),Gn=(a(682),a(371)),zn=a.n(Gn),Kn=a(771);a(335);function $n(e){var t=e.className,a=e.seconds;return r.a.createElement("time",{dateTime:"P".concat(Math.round(a),"S"),className:t},function(e){var t=new Date(1e3*e),a=t.getUTCHours(),n=t.getUTCMinutes(),r=Vn(t.getUTCSeconds());if(a)return"".concat(a,":").concat(Vn(n),":").concat(r);return"".concat(n,":").concat(r)}(a))}function Vn(e){return("0"+e).slice(-2)}var qn=a(372),Wn=a.n(qn),Yn=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={totalSeconds:0,loop:!0,playing:!0,playingIcon:"pause",loopIcon:"redo",loadingInfo:{},volume:.3},e.onHandleClickPlaying=function(){var t=e.state,a=t.playing,n=t.playingIcon;e.setState({playing:!a,playingIcon:"pause"===n?"caret-right":"pause"})},e.onHandleClickLoop=function(){var t=e.state,a=t.loop,n=t.loopIcon;e.setState({loop:!a,loopIcon:"redo"===n?"close":"redo"})},e.onChangeSeek=function(t){isNaN(t)||(e.setState({loadingInfo:Object(U.a)(Object(U.a)({},e.state.loadingInfo),{},{playedSeconds:t})}),e.player.seekTo(parseFloat(t)))},e.onChangeVolume=function(t){isNaN(t)||e.setState({volume:t/100})},e.Tooltip=function(e){return r.a.createElement($n,{seconds:e})},e.ref=function(t){e.player=t},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.totalSeconds,n=t.playing,o=t.loop,i=t.playingIcon,c=t.loopIcon,l=t.loadingInfo,s=t.volume,u=this.props,m=u.isDetail,p=u.imageHash,d=u.musicHash;return r.a.createElement("div",{className:m?"detailPlayer":"nowPlayer"},r.a.createElement(zn.a,{ref:this.ref,volume:s,loop:o,url:window.$linkIPFS+d,playing:n,width:"0",height:"0",onProgress:function(t){e.setState({loadingInfo:t})},onDuration:function(t){e.setState({totalSeconds:t})}}),r.a.createElement(v.a,{shape:"circle",size:"large",icon:"step-backward",className:"icon-formart"}),r.a.createElement(xe.a,{title:n?"Play":"Stop"},r.a.createElement(v.a,{shape:"circle",size:"large",icon:i,className:"icon-formart",onClick:function(){e.onHandleClickPlaying()}})),r.a.createElement(v.a,{shape:"circle",size:"large",icon:"step-forward",className:"icon-formart"}),r.a.createElement(xe.a,{title:o?"Loop":"No Loop"},r.a.createElement(v.a,{shape:"circle",size:"large",icon:c,className:"icon-formart",onClick:function(){e.onHandleClickLoop()}})),r.a.createElement($e.a,{size:50,style:{marginLeft:20},src:window.$linkIPFS+p,alt:"Avatar photo"}),r.a.createElement(Kn.a,{tipFormatter:this.Tooltip,min:0,max:a,onChange:this.onChangeSeek,value:"number"===typeof l.playedSeconds?l.playedSeconds:0,style:{width:"300px",marginLeft:10},step:1e-6}),r.a.createElement($n,{seconds:l.playedSeconds?l.playedSeconds:0}),r.a.createElement(Wn.a,null,"/"),r.a.createElement($n,{seconds:a}),r.a.createElement(qe.a,{overlay:r.a.createElement("div",{style:{display:"inline-block",height:100}},r.a.createElement(Kn.a,{onChange:this.onChangeVolume,vertical:!0,defaultValue:30})),placement:"topCenter"},r.a.createElement(v.a,{style:{marginLeft:10},shape:"circle",type:"default",icon:"bell"})))}}]),a}(n.Component),Jn=Object(m.b)((function(e){return{appReducer:e.appReducer,userReducer:e.userReducer}}),(function(e){return{}}))(Yn),Qn=a(72),Xn=a.n(Qn),Zn=(a(129),f.a.Text),er=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,text:""},e.handleChange=function(t){e.setState({text:t})},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){var a={idMongo:e.props.idMongo,lyric:e.state.text};e.setState({visible:!1,text:""}),console.log(a),se(a).then((function(e){console.log(e)}))},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(xe.a,{title:"Edit lyric",placement:"leftTop"},r.a.createElement(v.a,{disabled:this.props.disabled,ghost:!0,type:"danger",icon:"edit",onClick:this.showModal},r.a.createElement(Zn,null,"Edit lyric"))),r.a.createElement(h.a,{title:"Edit Lyric",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{type:"danger"},okText:"Submit"},r.a.createElement(Xn.a,{theme:"snow",value:this.state.text,onChange:this.handleChange})))}}]),a}(r.a.Component),tr=f.a.Paragraph,ar=f.a.Text,nr=f.a.Title,rr=dn.a.Countdown,or=da.a.Meta,ir=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.idMongo;t!==this.props.idMongo&&this.props.getSongByID(t)}},{key:"componentDidMount",value:function(){var e;console.log(this.props.idMongo),this.props.getSongByID(this.props.idMongo),this.props.getRelatedUser(),e={idSongMongo:this.props.idMongo},new Promise((function(t,a){return O.a.post(k.a.api_url+"/users/postViewMusic",e,{headers:Q()}).then((function(e){if(0===e.data.status)return console.log(e.data.error.message),a(e.data.error.message);t(e.data.result)})).catch((function(e){a(e)}))}))}},{key:"render",value:function(){var e=this,t=this.props.songReducer,a=t.songInfo,n=t.songSameSingerData,o=t.relatedUserData;if(t.error)return r.a.createElement(Sn,{history:this.props.history,subTitle:"Song not found. Please try another link!"});if(!a)return r.a.createElement(Ue,null);var i=[{title:"Address",dataIndex:"investor",key:"address",ellipsis:!0,render:function(t){return r.a.createElement(v.a,{style:{textAlign:"left",padding:0},type:"link",onClick:function(){return e.props.history.push("/page/".concat(t))}},t)}},{title:"Invest percent",dataIndex:"percentage",key:"percent",render:function(e){return r.a.createElement(ar,null,parseFloat(e/1e3).toFixed(3)," %")}},{title:"Invest Amount",dataIndex:"amount",key:"amount",render:function(e){return r.a.createElement(ar,null,te(e)," HAK")}}];return r.a.createElement(at.a,null,r.a.createElement(at.a,{gutter:[0,32]},r.a.createElement(nt.a,{span:18},r.a.createElement(at.a,null,r.a.createElement(Jn,{musicHash:a.hash,imageHash:a.image,isDetail:!0})),r.a.createElement(at.a,{style:{padding:5,margin:5}},r.a.createElement(nt.a,{span:8},r.a.createElement(at.a,null,r.a.createElement(or,{style:{paddingBottom:10},avatar:r.a.createElement($e.a,{size:59,src:window.$linkIPFS+a.userUpload.avatar}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:16},type:"link",onClick:function(){return e.props.history.push("/page/".concat(a.userUpload.addressEthereum))}},r.a.createElement(ar,{style:{fontSize:18},type:"warning"},a.userUpload.nickName)),description:r.a.createElement(ar,null," ",te(a.follow)," Follow ")})),r.a.createElement(at.a,{style:{padding:5,margin:5}},r.a.createElement($e.a,{shape:"square",size:220,src:"https://ipfs.fotra.tk/ipfs/"+a.image,alt:"Music photo"}),r.a.createElement(xe.a,{title:a.name,placement:"leftTop"},r.a.createElement(tr,{strong:!0,style:{fontSize:"20px",margin:"15px"},ellipsis:{rows:2}},a.name))),r.a.createElement(at.a,{style:{padding:5,margin:5}},r.a.createElement(sn,{title:"Singer",content:a.artist,link:"link here"}),r.a.createElement(sn,{title:"Author",content:"Nguy\u1ec5n Ho\xe0ng H\u1ea3i",link:"link here"}),r.a.createElement(sn,{title:"Release",content:Y(1e3*a.blockTime).format("L")}),r.a.createElement(sn,{title:"View",content:a.view}),r.a.createElement(sn,{title:"Download Total",content:a.totalDownloader}),r.a.createElement(sn,{title:"Download Week",content:a.weekDownloader}),r.a.createElement(sn,{title:"Contract Permission",content:a.contractPermission?"Allow":"Not Allow"}),r.a.createElement(sn,{title:"ISO",content:a.IsISO?Y().unix()>=a.timeExpired?"Used":"Now Using":"Not Use",link:"link here"}))),r.a.createElement(nt.a,{span:16},r.a.createElement(at.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-around",marginBottom:10,paddingBottom:10}},r.a.createElement(xn,{ownerSongID:a.userUpload._id,isFollowed:a.isFollowed}),r.a.createElement(qa,{disabled:this.props.userReducer.user.id!==a.userUpload._id,idFile:a.idFile}),r.a.createElement(er,{disabled:this.props.userReducer.user.id!==a.userUpload._id,idMongo:this.props.idMongo}),r.a.createElement(on,{disabled:Y().unix()>=a.timeExpired,idFile:a.idFile}),r.a.createElement(Ja,{idFile:a.idFile})),r.a.createElement(at.a,{style:{padding:5,marginTop:20}},r.a.createElement(nr,{level:4,type:"secondary"}," LYRIC  "),r.a.createElement("div",{style:{width:"100%",maxHeight:250,backgroundColor:"rgb(239, 242, 245)",overflow:"auto"}},r.a.createElement("div",{style:{padding:5,margin:5},dangerouslySetInnerHTML:{__html:a.lyric}}))),r.a.createElement(at.a,{style:{padding:3,marginTop:20}},r.a.createElement(nr,{level:4,type:"secondary"}," INITIAL SONG OFFERING (ISO) INFOMATION "),a.IsISO?r.a.createElement("div",null,r.a.createElement(rr,{valueStyle:{fontSize:"17px",textAlign:"center",margin:"5px"},value:1e3*a.timeExpired,format:"D Ng\xe0y H Gi\u1edd m Ph\xfat s"}),r.a.createElement(fn.a,{style:{paddingRight:"10px",margin:"5px"},strokeColor:{from:"#108ee9",to:"#FF5733"},percent:Number(parseFloat(100-100*a.amountRemaining/a.offerAmount).toFixed(1)),status:"active",showInfo:!0}),r.a.createElement(sn,{title:"Progress",content:te(a.offerAmount-a.amountRemaining)+" / "+te(a.offerAmount)+" HAK"}),r.a.createElement(sn,{title:"Total Offer Amount",content:te(a.offerAmount)+" HAK"}),r.a.createElement(sn,{title:"Total Offer Percent",content:parseFloat(a.offerPercent/1e3).toFixed(3)+"%"}),r.a.createElement(sn,{title:"Amount Remaining",content:te(a.amountRemaining)+" HAK"}),r.a.createElement(sn,{title:"Owner Percent Remaining",content:parseFloat(a.ownerPercent/1e3).toFixed(3)+"%"}),r.a.createElement(sn,{title:"Invest table",content:""}),r.a.createElement(Ra.a,{rowKey:function(e){return e.idFile},columns:i,dataSource:a.investListISO,pagination:!1})):r.a.createElement(ar,null," This song is not using ISO yet. ")),r.a.createElement(at.a,{style:{padding:5,marginTop:20}},r.a.createElement(at.a,null,r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:"20px"},type:"link",onClick:function(){}},r.a.createElement(nr,{level:4,type:"secondary"},"SONG WITH THE SAME SINGER >>>"))),r.a.createElement(at.a,{gutter:[8,0],type:"flex",justify:"space-around"},n?0===n.length?r.a.createElement(ar,null," This user just have this song! "):n.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:8,style:{width:170,marginTop:20}},r.a.createElement(Oa,{songInfo:e}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(Ca,null)),r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(Ca,null))))),r.a.createElement(at.a,{style:{padding:5,marginTop:20}},r.a.createElement(at.a,null,r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:"20px"},type:"link",onClick:function(){}},r.a.createElement(nr,{level:4,type:"secondary"},"RELATED ARTIST >>>"))),r.a.createElement(at.a,{gutter:[8,0],type:"flex",justify:"space-around"},o?o.map((function(e){return r.a.createElement(nt.a,{span:6,style:{width:170,marginTop:20}},r.a.createElement(Ea,{songPage:!0,user:e}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(ya,null)),r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(ya,null)),r.a.createElement(nt.a,{span:8,style:{marginTop:20}},r.a.createElement(ya,null)))))))),r.a.createElement(nt.a,{span:6},r.a.createElement("div",{style:{backgroundColor:"#e0e0e0",height:1e3}},"Advertising"))))}}]),a}(r.a.Component),cr=Object(d.g)(Object(m.b)((function(e){return{songReducer:e.songReducer,userReducer:e.userReducer}}),(function(e){return{getSongByID:function(t){return e(Tn(t))},getSongSameSinger:function(t){return e(Dn(t))},getRelatedUser:function(){return e(_n())}}}))(ir)),lr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(cr,{idMongo:this.props.match.params.idMongo}),history:this.props.history})}}]),a}(n.Component),sr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dataISO:[],loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e,t){return O.a.get(k.a.api_url+"/ethereums/getISOList",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);console.log(a.data.result),e(a.data.result)})).catch((function(e){console.log("loine: "+e),t(e)}))})).then((function(t){e.setState({dataISO:t,loading:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},this.state.loading?r.a.createElement(Ue,null):r.a.createElement(at.a,{gutter:[{xs:8,sm:16,md:24,lg:32},20]},this.state.dataISO.map((function(e){return r.a.createElement(nt.a,{key:e.idFile,span:6},r.a.createElement(bn,{record:e,action:!0}))}))))}}]),a}(r.a.Component),ur=Object(m.b)((function(e){return{}}),(function(e){return{}}))(sr),mr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(ur,null),history:this.props.history})}}]),a}(n.Component);a(717),a(718);function pr(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}function dr(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||xa.a.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||xa.a.error("Image must smaller than 2MB!"),t&&a}var fr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.handleChange=function(t){"uploading"!==t.file.status?"done"===t.file.status&&(pr(t.file.originFileObj,(function(t){e.setState({imageUrl:t,loading:!1})})),e.props.file(t.file.response.result,e.state.loading)):e.setState({loading:!0})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement(y.a,{type:this.state.loading?"loading":"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.state.imageUrl;return r.a.createElement(Cn.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:k.a.api_url+"/users/upload",beforeUpload:dr,onChange:this.handleChange},t?r.a.createElement("img",{src:t,alt:"avatar",style:{width:"100%"}}):e)}}]),a}(r.a.Component),hr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.goTo,n=t.func,o=t.title,i=t.subTitle;return r.a.createElement(Re.a,{status:"success",title:o,subTitle:i,extra:r.a.createElement(v.a,{type:"primary",onClick:function(){e.props.history.push("/".concat(a)),n&&n()}},"Go to ",a)})}}]),a}(r.a.Component),gr=Object(d.g)(hr),Er=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hashAvatar:"",hashCoverPhoto:""},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||(console.log("Received values of form: ",a),e.setState({hashAvatar:"",hashCoverPhoto:""}),e.props.updateUser(a),e.props.form.resetFields())}))},e.normFile=function(t){e.setState({hashAvatar:t})},e.normFile2=function(t){e.setState({hashCoverPhoto:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return this.props.userReducer.isUpdate?r.a.createElement(Ue,null):this.props.userReducer.updateSuccessful?r.a.createElement(gr,{title:"SUCCESSFUL",subTitle:"Update user information successful",goTo:"home",func:this.props.reset_update}):this.props.userReducer.errorUpdate?r.a.createElement(Pe,{func:this.props.handle_update_error,title:"ERROR at update user information!",subTitle:this.props.userReducer.errorUpdate,goTo:"setting"}):r.a.createElement(g.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Nickname\xa0",r.a.createElement(xe.a,{title:"What do you want others to call you?"},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"question-circle-o"})))},t("nickName")(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"UserName\xa0",r.a.createElement(xe.a,{title:"What do you want others to call you?"},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"question-circle-o"})))},t("userName",{rules:[{message:"Your input is not valid.",pattern:/^\S{8,16}$/}]})(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Youtube\xa0",r.a.createElement(xe.a,{title:"Write your link youtube chanel."},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"youtube"})))},t("youtube")(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Facebook\xa0",r.a.createElement(xe.a,{title:"Write your link facebook."},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"facebook"})))},t("facebook")(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Home Address\xa0",r.a.createElement(xe.a,{title:"Write your home address."},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"home"})))},t("home")(r.a.createElement(E.a,null))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"Avatar\xa0",r.a.createElement(xe.a,{title:"Upload your avatar."},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"smile"})))},t("avatar",{initialValue:this.state.hashAvatar})(r.a.createElement(fr,{file:function(t){return e.normFile(t)}}))),r.a.createElement(g.a.Item,{label:r.a.createElement("span",null,"CoverPhoto\xa0",r.a.createElement(xe.a,{title:"Upload your cover photo."},r.a.createElement(y.a,{style:{fontSize:"15px",color:"#1da1f2",paddingLeft:5},type:"picture"})))},t("coverPhoto",{initialValue:this.state.hashCoverPhoto})(r.a.createElement(fr,{file:function(t){return e.normFile2(t)}}))),r.a.createElement(g.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Submit")))}}]),a}(r.a.Component),yr=g.a.create({name:"validate_other"})(Er),br=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{updateUser:function(t){return e(Oe(t))},handle_update_error:function(){return e({type:"HANDLE_UPDATE_ERROR"})},reset_update:function(){return e({type:"RESET_UPDATE"})}}}))(yr),vr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(br,null),history:this.props.history})}}]),a}(n.Component),Sr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.appReducer.musicSelected,t=e.hash,a=e.image,n=e.idSolidity;return r.a.createElement("div",{style:{visibility:this.props.isMusicDetail?"":0===Object.entries(this.props.appReducer.musicSelected).length?"hidden":""}},r.a.createElement(da.a,{hoverable:!0,bordered:!1,bodyStyle:{backgroundColor:"#D6DBDF",position:"fixed",bottom:0,width:"100vw",padding:10}},r.a.createElement(Jn,{musicHash:t,imageHash:a,idFile:n})))}}]),a}(n.Component),Or=Object(m.b)((function(e){return{appReducer:e.appReducer}}),(function(e){return{}}))(Sr),Cr=Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{}}))((function(e){var t=e.component,a=e.userReducer,n=Object(jt.a)(e,["component","userReducer"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return a.signinSuccessful?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))})),kr=(a(719),f.a.Text),wr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:""},e.componentDidMount=function(){e.setState({text:e.props.content})},e.handleChange=function(t){e.setState({text:t})},e.handleOk=function(){if(e.props.mainContract){var t={songID:e.props.songID,content:e.state.text,nameContractForm:e.props.nameContractForm};console.log(t),me(t).then((function(t){return console.log(t),e.props.history.push("/mainContract/"+t.idContract),h.a.success({content:"Create a contract to this song success!"})})).catch((function(t){return e.setState({text:e.props.content}),h.a.error({title:"Create a contract to this song failed!",content:t})}))}else{var a={tempContractID:e.props.idMongo,content:e.state.text};console.log(a),ue(a).then((function(e){return console.log(e),h.a.success({content:"Update Success!"})})).catch((function(t){return e.setState({text:e.props.content}),h.a.error({title:"Update Failed!",content:t})}))}},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(da.a,{bordered:!1,title:r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginRight:20}},r.a.createElement(kr,{code:!0}," Last updated: ",Y(this.props.date).format("LLLL"))),extra:r.a.createElement(v.a,{onClick:this.handleOk,type:"danger"},this.props.mainContract?"Use this form":"Update"),style:{width:"100%"}},r.a.createElement(Xn.a,{theme:"snow",value:this.state.text,onChange:this.handleChange,modules:a.modules,formats:a.formats,placeholder:"Write something...",style:{width:"100%",height:"1000px"}}))}}]),a}(r.a.Component);wr.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},wr.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var jr=Object(d.g)(wr),Ir=Da.a.TabPane,_r=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",showCreateForm:!1,tempContractData:[],nameContractForm:""},e.handleChange=function(t){e.setState({text:t})},e.handleChangeName=function(t){var a=t.target.value;e.setState({nameContractForm:a})},e.handleClickBtnCreate=function(t){e.setState({showCreateForm:t})},e.handleOk=function(){if(!e.state.text||!e.state.nameContractForm)return h.a.error({title:"Please fill all field!"});var t={content:e.state.text,nameContractForm:e.state.nameContractForm};console.log(t),ue(t).then((function(t){return console.log(t),e.setState({text:"",showCreateForm:!1,tempContractData:[],nameContractForm:""}),de().then((function(t){e.setState({tempContractData:t}),console.log(t)})),h.a.success({title:"Update Success!"})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;de().then((function(t){e.setState({tempContractData:t}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=r.a.createElement(v.a,{type:"primary",onClick:function(){return e.handleClickBtnCreate(!0)}},"Create Form");return r.a.createElement("div",null,r.a.createElement(Da.a,{tabBarExtraContent:t},this.state.tempContractData.map((function(e,t){return r.a.createElement(Ir,{tab:e.nameContractForm,key:t},r.a.createElement(jr,{content:e.content,idMongo:e._id,date:e.date_updated}))}))),r.a.createElement(h.a,{title:r.a.createElement(E.a,{value:this.state.nameContractForm,style:{width:"400px"},placeholder:"Input name of this contract form",onChange:this.handleChangeName}),style:{top:20},visible:this.state.showCreateForm,onOk:this.handleOk,onCancel:function(){return e.handleClickBtnCreate(!1)}},r.a.createElement(Xn.a,{theme:"snow",value:this.state.text,onChange:this.handleChange,modules:a.modules,formats:a.formats,placeholder:"Write something...",style:{width:"100%",height:"500px",marginBottom:"50px"}})))}}]),a}(r.a.Component);_r.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},_r.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var Dr=Object(d.g)(Object(m.b)((function(e){return{}}),(function(e){return{}}))(_r)),Tr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(Dr,null),history:this.props.history})}}]),a}(n.Component),Ar=Da.a.TabPane,Rr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",showCreateForm:!1,tempContractData:[],nameContractForm:""},e.handleChange=function(t){e.setState({text:t})},e.handleChangeName=function(t){var a=t.target.value;e.setState({nameContractForm:a})},e.handleClickBtnCreate=function(t){e.setState({showCreateForm:t})},e.handleOk=function(){if(!e.state.text||!e.state.nameContractForm)return h.a.error({title:"Please fill all field!"});var t={content:e.state.text,nameContractForm:e.state.nameContractForm,songID:e.props.idTempContract};console.log(t),me(t).then((function(t){return console.log(t),e.setState({text:"",showCreateForm:!1}),e.props.history.push("/mainContract/"+t.idContract),h.a.success({title:"Create new contract to this song success!"})})).catch((function(e){return h.a.error({title:"Error: ".concat(e)})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;de(this.props.idTempContract).then((function(t){e.setState({tempContractData:t}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=r.a.createElement(v.a,{type:"primary",onClick:function(){return e.handleClickBtnCreate(!0)}},"Create Form");return r.a.createElement("div",null,r.a.createElement(Da.a,{tabBarExtraContent:t},this.state.tempContractData.map((function(t,a){return r.a.createElement(Ar,{tab:t.nameContractForm,key:a},r.a.createElement(jr,{mainContract:!0,nameContractForm:t.nameContractForm,songID:e.props.idTempContract,content:t.content,idTempContract:t._id,date:t.date_updated}))}))),r.a.createElement(h.a,{title:r.a.createElement(E.a,{style:{width:"400px"},placeholder:"Input name of this contract form",onChange:this.handleChangeName}),style:{top:20},visible:this.state.showCreateForm,onOk:this.handleOk,onCancel:function(){return e.handleClickBtnCreate(!1)}},r.a.createElement(Xn.a,{theme:"snow",value:this.state.text,onChange:this.handleChange,modules:a.modules,formats:a.formats,placeholder:"Write something...",style:{width:"100%",height:"500px",marginBottom:"50px"}})))}}]),a}(r.a.Component);Rr.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},Rr.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var xr=Object(d.g)(Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{}}))(Rr)),Fr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(xr,{idTempContract:this.props.match.params.idTempContract}),history:this.props.history})}}]),a}(n.Component),Ur=(da.a.Meta,Da.a.TabPane,f.a.Text),Nr=f.a.Title,Pr=g.a.create({name:"form_in_modal"})(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={contractMoney:0,OwnerCA:0,SignerCA:0,costUSD:23e3,estimatedTime:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.setState({contractMoney:this.props.contractMoney/this.state.costUSD,OwnerCA:this.props.ownerCompensationAmount/this.state.costUSD,SignerCA:this.props.signerCompensationAmount/this.state.costUSD,estimatedTime:ae(this.props.timeAmount)})}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.nameContractForm,n=t.contractMoney,o=t.ownerCompensationAmount,i=t.signerCompensationAmount,c=t.isPublic,l=t.timeAmount,s=t.form.getFieldDecorator;return r.a.createElement(g.a,{layout:"vertical"},r.a.createElement(g.a.Item,{label:"Contract name"},s("nameContractForm",{rules:[{required:!0,message:"Please input the name of this contract!"}],initialValue:a})(r.a.createElement(E.a,{placeholder:"Please input contract's name"}))),r.a.createElement(g.a.Item,{label:"Contract Money"},s("contractMoney",{rules:[{required:!0,message:"Please input contract money of this song!"}],initialValue:n,onChange:function(t){e.setState({contractMoney:t/e.state.costUSD})}})(r.a.createElement(Ye.a,{style:{width:200},min:0,formatter:function(e){return te(e)},maxLength:25})),r.a.createElement("span",{className:"ant-form-text"}," HAK"),r.a.createElement("span",{className:"ant-form-text"},"\u279c   ",this.state.contractMoney," USD")),r.a.createElement(g.a.Item,{label:"Owner Compensation Amount"},s("ownerCompensationAmount",{rules:[{required:!0,message:"Please input Owner Compensation Amount!"}],initialValue:o,onChange:function(t){e.setState({OwnerCA:t/e.state.costUSD})}})(r.a.createElement(Ye.a,{style:{width:200},min:0,formatter:function(e){return te(e)},maxLength:25})),r.a.createElement("span",{className:"ant-form-text"}," HAK"),r.a.createElement("span",{className:"ant-form-text"},"\u279c   ",this.state.OwnerCA," USD")),r.a.createElement(g.a.Item,{label:"Signer Compensation Amount"},s("signerCompensationAmount",{rules:[{required:!0,message:"Please input Signer Compensation Amount!"}],initialValue:i,onChange:function(t){e.setState({SignerCA:t/e.state.costUSD})}})(r.a.createElement(Ye.a,{style:{width:200},min:0,formatter:function(e){return te(e)},maxLength:25})),r.a.createElement("span",{className:"ant-form-text"}," HAK"),r.a.createElement("span",{className:"ant-form-text"},"\u279c   ",this.state.SignerCA," USD")),r.a.createElement(g.a.Item,{label:"Time Amount"},s("timeAmount",{rules:[{required:!0,message:"Please input Time Amount!"}],initialValue:l,onChange:function(t){e.setState({estimatedTime:ae(t)})}})(r.a.createElement(Ye.a,{style:{width:200},min:0,maxLength:15})),r.a.createElement("span",{className:"ant-form-text"},"\u279c   ",this.state.estimatedTime)),r.a.createElement(g.a.Item,{label:"Public Permission"},s("isPublic",{rules:[{required:!0,message:"Please choose this field!"}],initialValue:c,valuePropName:"checked"})(r.a.createElement(On.a,null))))}}]),a}(r.a.Component)),Lr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",contract:null},e.handleChangeContent=function(t){e.setState({text:t})},e.hanldeExecuteContract=function(){X("Executing to Ethereum ..."),ge({idContractMongo:e.props.idContract}).then((function(t){return ee(t),e.setState({contract:null,text:""}),fe(e.props.idContract).then((function(t){console.log(t),e.setState({contract:t,text:t.content})})),h.a.success({title:"Update contract success!"})})).catch((function(e){return Z("Can not execute transaction, Please try again!"),h.a.error({title:"Error: ".concat(e)})}))},e.hanldeCancelContract=function(){X("Executing to Ethereum ..."),ye({idContractMongo:e.props.idContract}).then((function(t){return ee(t),e.setState({contract:null,text:""}),fe(e.props.idContract).then((function(t){console.log(t),e.setState({contract:t,text:t.content})})),h.a.success({title:"Update contract success!"})})).catch((function(e){return Z("Can not execute transaction, Please try again!"),h.a.error({title:"Error: ".concat(e)})}))},e.hanldeApproveContract=function(){X("Executing to Ethereum ..."),Ee({idContractMongo:e.props.idContract}).then((function(t){return ee(t),e.setState({contract:null,text:""}),fe(e.props.idContract).then((function(t){console.log(t),e.setState({contract:t,text:t.content})})).catch((function(e){console.log(e)})),h.a.success({title:"Confirm contract success!"})})).catch((function(e){return Z("Can not execute transaction, Please try again!  ".concat(e)),h.a.error({title:"Error: ".concat(e)})}))},e.hanldeUpdateContract=function(){e.formRef.props.form.validateFields((function(t,a){if(t)return xa.a.error("please fill out all fields");Object.assign(a,{idContract:e.props.idContract,content:e.state.text}),me(a).then((function(t){return e.setState({contract:null,text:""}),fe(e.props.idContract).then((function(t){console.log(t),e.setState({contract:t,text:t.content})})),h.a.success({title:"Update contract success!"})})).catch((function(e){return h.a.error({title:"Error: ".concat(e)})}))}))},e.onApproved=function(t){he({approved:t,idContract:e.props.idContract}).catch((function(e){return h.a.error({title:"Error: ".concat(e)})}))},e.saveFormRef=function(t){e.formRef=t},e}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.idContract;t!==this.props.idContract&&fe(t)}},{key:"componentDidMount",value:function(){var e=this;console.log(this.props.idContract),fe(this.props.idContract).then((function(t){console.log(t),e.setState({contract:t,text:t.content})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;if(!this.state.contract)return r.a.createElement(Ue,null);var t=this.state.contract,n=t.songID,o=t.timeAmount,i=t.isExecuteContract,c=t.ownerID,l=t.ownerFollow,s=t.ownerApproved,u=t.signerID,m=t.signerApproved,p=t.signerFollow,d=t.nameContractForm,f=t.contractMoney,h=t.ownerCompensationAmount,g=t.signerCompensationAmount,E=t.isPublic,b=t.whoExecuted,S=t.isConfirmContract,O=t.isCancel;return r.a.createElement("div",{style:{}},r.a.createElement(at.a,{style:{display:"flex",justifyContent:"center",padding:5,margin:5}},r.a.createElement(Nr,{level:4},n.name," ",O?"(Canceled)":null)),r.a.createElement(at.a,{gutter:[32,32]},r.a.createElement(nt.a,{span:6},r.a.createElement(da.a,{style:{backgroundColor:"#FBFBFB"},hoverable:!0,bordered:!1},r.a.createElement("div",{className:"logo-name"},r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement($e.a,{size:180,src:window.$linkIPFS+c.avatar,alt:"Avatar photo"})),r.a.createElement("div",null,r.a.createElement(Nr,{ellipsis:!0,level:4},c.nickName),r.a.createElement(Ur,{type:"secondary"},l," Follow"),r.a.createElement("br",null),r.a.createElement(Ur,{type:"danger"},"Owner"),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(Ur,{type:"secondary"},"Approved : "),this.props.userReducer.user.id===c._id?r.a.createElement(On.a,{onChange:function(t){return e.onApproved(t)},disabled:!1,defaultChecked:s,checkedChildren:r.a.createElement(y.a,{type:"check"}),unCheckedChildren:r.a.createElement(y.a,{type:"close"})}):r.a.createElement(On.a,{disabled:!0,checked:s,checkedChildren:r.a.createElement(y.a,{type:"check"}),unCheckedChildren:r.a.createElement(y.a,{type:"close"})})))),r.a.createElement(Un,{icon:"phone",link:"linkPhone",content:c.phone}),r.a.createElement(Un,{icon:"youtube",link:"linkYoutube",content:c.youtube}),r.a.createElement(Un,{icon:"facebook",link:"linkFacebook",content:c.facebook}),r.a.createElement(Un,{icon:"home",link:"linkHome",content:c.home}))),r.a.createElement(nt.a,{style:{backgroundColor:"#FBFBFB"},span:12},r.a.createElement(Pr,{wrappedComponentRef:this.saveFormRef,onCancel:this.handleCancel,onCreate:this.handleCreate,onRef:function(t){return e.child=t},nameContractForm:d,contractMoney:f,ownerCompensationAmount:h,signerCompensationAmount:g,isPublic:E,timeAmount:o}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(v.a,{disabled:!(m&&s&&!i),type:"danger",onClick:function(){return e.hanldeExecuteContract()}}," Execute Transaction"),S?r.a.createElement(v.a,{disabled:!!O,type:"danger",onClick:function(){return e.hanldeCancelContract()}}," Cancel Contract"):r.a.createElement(v.a,{disabled:!!i,type:"primary",onClick:function(){return e.hanldeUpdateContract()}}," Update Contract"),r.a.createElement(v.a,{disabled:!!S||!i||e.props.userReducer.user.id===b,type:"danger",onClick:function(){return e.hanldeApproveContract()}}," Confirm Transaction"))),r.a.createElement(nt.a,{span:6},r.a.createElement(da.a,{style:{backgroundColor:"#FBFBFB"},hoverable:!0,bordered:!1},r.a.createElement("div",{className:"logo-name"},r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement($e.a,{size:180,src:window.$linkIPFS+u.avatar,alt:"Avatar photo"})),r.a.createElement("div",null,r.a.createElement(Nr,{ellipsis:!0,level:4},u.nickName),r.a.createElement(Ur,{type:"secondary"},p," Follow"),r.a.createElement("br",null),r.a.createElement(Ur,{type:"warning"},"Signer"),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(Ur,{type:"secondary"},"Approved : "),this.props.userReducer.user.id===u._id?r.a.createElement(On.a,{onChange:function(t){return e.onApproved(t)},disabled:!1,defaultChecked:m,checkedChildren:r.a.createElement(y.a,{type:"check"}),unCheckedChildren:r.a.createElement(y.a,{type:"close"})}):r.a.createElement(On.a,{disabled:!0,checked:m,checkedChildren:r.a.createElement(y.a,{type:"check"}),unCheckedChildren:r.a.createElement(y.a,{type:"close"})})))),r.a.createElement(Un,{icon:"phone",link:"linkPhone",content:u.phone}),r.a.createElement(Un,{icon:"youtube",link:"linkYoutube",content:u.youtube}),r.a.createElement(Un,{icon:"facebook",link:"linkFacebook",content:u.facebook}),r.a.createElement(Un,{icon:"home",link:"linkHome",content:u.home})))),r.a.createElement(at.a,null,r.a.createElement(Xn.a,{theme:"snow",value:this.state.text,onChange:this.handleChangeContent,modules:a.modules,formats:a.formats,placeholder:"Write something...",style:{width:"100%",height:"1000px",marginBottom:"50px",marginTop:"50px"}})))}}]),a}(r.a.Component);Lr.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},Lr.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var Mr=Object(d.g)(Object(m.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{}}))(Lr)),Hr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(Mr,{idContract:this.props.match.params.idContract}),history:this.props.history})}}]),a}(n.Component),Br=(a(720),da.a.Meta),Gr=(dn.a.Countdown,f.a.Text),zr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.record,n=t.isOwner;return r.a.createElement(da.a,{style:{display:"flex",alignItems:"center",flexDirection:"column"},hoverable:!0,cover:r.a.createElement("img",{className:"img-background-music",alt:"music background",src:window.$linkIPFS+a.songID.image,onClick:function(){return e.props.history.push("/mainContract/".concat(a._id))}}),bodyStyle:{padding:"15px",width:"100%",border:"0px solid green"}},r.a.createElement(v.a,{style:{textAlign:"center",padding:0,fontSize:14,height:20},type:"link",onClick:function(){return e.props.history.push("/song/".concat(a.songID._id))}},a.songID.name),n?r.a.createElement(Br,{style:{paddingBottom:10},avatar:r.a.createElement($e.a,{size:59,src:window.$linkIPFS+a.ownerID.avatar,alt:a.ownerID.nickName}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:16},type:"link",onClick:function(){return e.props.history.push("/page/".concat(a.ownerID.addressEthereum))}},r.a.createElement(Gr,{style:{fontSize:16},type:"warning"},a.ownerID.nickName))}):r.a.createElement(Br,{style:{paddingBottom:10},avatar:r.a.createElement($e.a,{size:59,src:window.$linkIPFS+a.signerID.avatar,alt:a.signerID.nickName}),title:r.a.createElement(v.a,{style:{textAlign:"left",padding:0,fontSize:16},type:"link",onClick:function(){return e.props.history.push("/page/".concat(a.signerID.addressEthereum))}},r.a.createElement(Gr,{style:{fontSize:16},type:"warning"},a.signerID.nickName))}))}}]),a}(r.a.Component),Kr=(Object(d.g)(zr),f.a.Text,f.a.Title),$r=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dataContract:null,loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e,t){return O.a.get(k.a.api_url+"/actions/getUserContract",{headers:Q()}).then((function(a){if(0===a.data.status)return t(a.data.error.message);e(a.data.result)})).catch((function(e){return t(e)}))})).then((function(t){console.log(t),e.setState({dataContract:t,loading:!1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},this.state.dataContract?r.a.createElement(at.a,{gutter:[32,32]},r.a.createElement(nt.a,{span:18},r.a.createElement(at.a,{style:{padding:10,margin:10,textAlign:"center"}},r.a.createElement(Kr,{level:4,type:"secondary"}," You Are Owner ")),r.a.createElement(at.a,{gutter:[{xs:8,sm:16,md:24,lg:32},20]},this.state.dataContract.ownerData.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:6},r.a.createElement(Oa,{songInfo:e.songID,contract:e}))}))),r.a.createElement(at.a,{style:{padding:10,margin:10,textAlign:"center"}},r.a.createElement(Kr,{level:4,type:"secondary"}," You Are Signer ")),r.a.createElement(at.a,{gutter:[{xs:8,sm:16,md:24,lg:32},20]},this.state.dataContract.signerData.map((function(e){return r.a.createElement(nt.a,{key:e._id,span:6},r.a.createElement(Oa,{songInfo:e.songID,contract:e}))})))),r.a.createElement(nt.a,{span:6},r.a.createElement("div",{style:{backgroundColor:"#e0e0e0",height:1e3}},"Advertising"))):r.a.createElement(Ue,null))}}]),a}(r.a.Component),Vr=Object(m.b)((function(e){return{}}),(function(e){return{}}))($r),qr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ct,{main:r.a.createElement(Vr,null),history:this.props.history})}}]),a}(n.Component),Wr=function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:_a}),r.a.createElement(d.b,{path:"/login",component:Te}),r.a.createElement(d.b,{path:"/register",component:Be}),r.a.createElement(Cr,{path:"/home",component:Ia}),r.a.createElement(Cr,{path:"/message",component:ea}),r.a.createElement(Cr,{path:"/iso",component:mr}),r.a.createElement(Cr,{path:"/setting",component:vr}),r.a.createElement(Cr,{path:"/contractFormManager",component:Tr}),r.a.createElement(Cr,{path:"/contract",component:qr}),r.a.createElement(Cr,{path:"/tempContract/:idTempContract",component:Fr}),r.a.createElement(Cr,{path:"/mainContract/:idContract",component:Hr}),r.a.createElement(Cr,{path:"/page/:userName",component:Bn}),r.a.createElement(Cr,{path:"/song/:idMongo",component:lr}),r.a.createElement(Cr,{component:Sn})),r.a.createElement(Or,null)))},Yr=a(373),Jr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{store:q},r.a.createElement(Yr.PersistGate,{loading:null,persistor:W},r.a.createElement(Wr,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Jr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[389,1,2]]]);
//# sourceMappingURL=main.b9ee5f62.chunk.js.map